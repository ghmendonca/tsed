<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Passport.js | Ts.ED - A Node.js and TypeScript Framework on top of Express/Koa.js.</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link canonical="https://tsed.io">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="apple-touch-icon">
    <link rel="icon" href="/apple-touch-icon.png" type="image/x-icon" sizes="180x180">
    <link rel="icon" href="/favicon-32x32.png" type="image/png" sizes="32x32">
    <link rel="icon" href="/favicon-16x16.png" type="image/png" sizes="16x16">
    <link rel="manifest" href="/site.webmanifest">
    <meta name="description" content="Use Passport.js with Express, TypeScript and Ts.ED. Passport is authentication middleware for Node.js. Extremely flexible and modular, Passport can be unobtrusively dropped in to any Express-based web application.">
    <meta name="keywords" content="ts.ed express typescript passport.js node.js javascript decorators">
    <meta property="og:url" content="https://tsed.io">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="Ts.ED - A Node.js and TypeScript Framework on top of Express/Koa.js.">
    <meta property="og:title" content="Ts.ED - A Node.js and TypeScript Framework on top of Express/Koa.js.">
    <meta property="og:description" content="A Node.js and TypeScript Framework on top of Express/Koa.js. It provides a lot of decorators and guidelines to write your code.">
    <meta property="og:image" content="https://tsed.io/tsed-og.png">
    <meta property="og:image:width" content="1024">
    <meta property="og:image:height" content="1024">
    <meta name="twitter:title" content="Ts.ED - A Node.js and TypeScript Framework on top of Express/Koa.js.">
    <meta name="twitter:description" content="A Node.js and TypeScript Framework on top of Express/Koa.js. It provides a lot of decorators and guidelines to write your code.">
    <meta name="twitter:card" content="summary">
    
    <link rel="preload" href="/assets/css/0.styles.3d8a74c1.css" as="style"><link rel="preload" href="/assets/js/app.bb7156b9.js" as="script"><link rel="preload" href="/assets/js/4.3e4f2bec.js" as="script"><link rel="preload" href="/assets/js/777.b4d91985.js" as="script"><link rel="prefetch" href="/assets/js/10.65ecdb18.js"><link rel="prefetch" href="/assets/js/100.f744ea96.js"><link rel="prefetch" href="/assets/js/101.e878fbfd.js"><link rel="prefetch" href="/assets/js/102.5ddb7f4b.js"><link rel="prefetch" href="/assets/js/103.de6fca25.js"><link rel="prefetch" href="/assets/js/104.528399b9.js"><link rel="prefetch" href="/assets/js/105.7dc0c6df.js"><link rel="prefetch" href="/assets/js/106.5e44070c.js"><link rel="prefetch" href="/assets/js/107.b8a6c12a.js"><link rel="prefetch" href="/assets/js/108.dc6e291e.js"><link rel="prefetch" href="/assets/js/109.4cdb2ebd.js"><link rel="prefetch" href="/assets/js/11.15637909.js"><link rel="prefetch" href="/assets/js/110.cb9185f9.js"><link rel="prefetch" href="/assets/js/111.1828593d.js"><link rel="prefetch" href="/assets/js/112.6c321814.js"><link rel="prefetch" href="/assets/js/113.5088c7a8.js"><link rel="prefetch" href="/assets/js/114.ab60f47c.js"><link rel="prefetch" href="/assets/js/115.ff7879f0.js"><link rel="prefetch" href="/assets/js/116.bc3958c3.js"><link rel="prefetch" href="/assets/js/117.7c2c8b7d.js"><link rel="prefetch" href="/assets/js/118.d4a6289c.js"><link rel="prefetch" href="/assets/js/119.9aebd45f.js"><link rel="prefetch" href="/assets/js/12.bcbcac52.js"><link rel="prefetch" href="/assets/js/120.483c1f8c.js"><link rel="prefetch" href="/assets/js/121.66b0a8d6.js"><link rel="prefetch" href="/assets/js/122.acd74be7.js"><link rel="prefetch" href="/assets/js/123.7cbf2f92.js"><link rel="prefetch" href="/assets/js/124.e253d4d6.js"><link rel="prefetch" href="/assets/js/125.fa461704.js"><link rel="prefetch" href="/assets/js/126.4a260b96.js"><link rel="prefetch" href="/assets/js/127.d02415ce.js"><link rel="prefetch" href="/assets/js/128.c6ddd520.js"><link rel="prefetch" href="/assets/js/129.bb703430.js"><link rel="prefetch" href="/assets/js/13.431fccc3.js"><link rel="prefetch" href="/assets/js/130.c5ee06d0.js"><link rel="prefetch" href="/assets/js/131.b91b601d.js"><link rel="prefetch" href="/assets/js/132.0c7c531e.js"><link rel="prefetch" href="/assets/js/133.7f82ee61.js"><link rel="prefetch" href="/assets/js/134.c49fb734.js"><link rel="prefetch" href="/assets/js/135.f7c7314f.js"><link rel="prefetch" href="/assets/js/136.76d4b68d.js"><link rel="prefetch" href="/assets/js/137.9a1e7600.js"><link rel="prefetch" href="/assets/js/138.3090b35f.js"><link rel="prefetch" href="/assets/js/139.d79ad32b.js"><link rel="prefetch" href="/assets/js/14.50c072f1.js"><link rel="prefetch" href="/assets/js/140.f75bad29.js"><link rel="prefetch" href="/assets/js/141.367d6dc6.js"><link rel="prefetch" href="/assets/js/142.c66580eb.js"><link rel="prefetch" href="/assets/js/143.d79a3dd2.js"><link rel="prefetch" href="/assets/js/144.8de338b8.js"><link rel="prefetch" href="/assets/js/145.2c48ab70.js"><link rel="prefetch" href="/assets/js/146.99d6340b.js"><link rel="prefetch" href="/assets/js/147.f03a7c4e.js"><link rel="prefetch" href="/assets/js/148.1e112621.js"><link rel="prefetch" href="/assets/js/149.a81fd775.js"><link rel="prefetch" href="/assets/js/15.0e26c3a8.js"><link rel="prefetch" href="/assets/js/150.e56edcea.js"><link rel="prefetch" href="/assets/js/151.40d9a8ff.js"><link rel="prefetch" href="/assets/js/152.136886d1.js"><link rel="prefetch" href="/assets/js/153.8fd181c2.js"><link rel="prefetch" href="/assets/js/154.457d177e.js"><link rel="prefetch" href="/assets/js/155.cfbdd1c5.js"><link rel="prefetch" href="/assets/js/156.c6cf48ae.js"><link rel="prefetch" href="/assets/js/157.490da21b.js"><link rel="prefetch" href="/assets/js/158.8da8c381.js"><link rel="prefetch" href="/assets/js/159.1bed3cb3.js"><link rel="prefetch" href="/assets/js/16.c81189a9.js"><link rel="prefetch" href="/assets/js/160.68a74f2f.js"><link rel="prefetch" href="/assets/js/161.5a4e2bd3.js"><link rel="prefetch" href="/assets/js/162.e41e3556.js"><link rel="prefetch" href="/assets/js/163.e6d9a993.js"><link rel="prefetch" href="/assets/js/164.576360e6.js"><link rel="prefetch" href="/assets/js/165.26569d94.js"><link rel="prefetch" href="/assets/js/166.1d80a330.js"><link rel="prefetch" href="/assets/js/167.1953a7c8.js"><link rel="prefetch" href="/assets/js/168.8fbd972e.js"><link rel="prefetch" href="/assets/js/169.6df2a0cb.js"><link rel="prefetch" href="/assets/js/17.62016cc7.js"><link rel="prefetch" href="/assets/js/170.0c02b5c0.js"><link rel="prefetch" href="/assets/js/171.a169316b.js"><link rel="prefetch" href="/assets/js/172.a30ac45c.js"><link rel="prefetch" href="/assets/js/173.abb52992.js"><link rel="prefetch" href="/assets/js/174.a01a7546.js"><link rel="prefetch" href="/assets/js/175.6b114371.js"><link rel="prefetch" href="/assets/js/176.75f7b5e1.js"><link rel="prefetch" href="/assets/js/177.b7224950.js"><link rel="prefetch" href="/assets/js/178.e199e94a.js"><link rel="prefetch" href="/assets/js/179.5c12a255.js"><link rel="prefetch" href="/assets/js/18.a1d8b8a9.js"><link rel="prefetch" href="/assets/js/180.46781b01.js"><link rel="prefetch" href="/assets/js/181.5dabee75.js"><link rel="prefetch" href="/assets/js/182.4eaf7e1d.js"><link rel="prefetch" href="/assets/js/183.d73ad267.js"><link rel="prefetch" href="/assets/js/184.a594d933.js"><link rel="prefetch" href="/assets/js/185.1cecb603.js"><link rel="prefetch" href="/assets/js/186.dd3ba4ab.js"><link rel="prefetch" href="/assets/js/187.2f4bcb82.js"><link rel="prefetch" href="/assets/js/188.36f25196.js"><link rel="prefetch" href="/assets/js/189.78135f12.js"><link rel="prefetch" href="/assets/js/19.c403d2cf.js"><link rel="prefetch" href="/assets/js/190.9e309e51.js"><link rel="prefetch" href="/assets/js/191.8ece56f5.js"><link rel="prefetch" href="/assets/js/192.be7e95c1.js"><link rel="prefetch" href="/assets/js/193.23d24c80.js"><link rel="prefetch" href="/assets/js/194.5650a2f6.js"><link rel="prefetch" href="/assets/js/195.d7e74e59.js"><link rel="prefetch" href="/assets/js/196.0cabac72.js"><link rel="prefetch" href="/assets/js/197.81f5028d.js"><link rel="prefetch" href="/assets/js/198.10398864.js"><link rel="prefetch" href="/assets/js/199.23a398b1.js"><link rel="prefetch" href="/assets/js/20.c58cd08a.js"><link rel="prefetch" href="/assets/js/200.31feb379.js"><link rel="prefetch" href="/assets/js/201.de4b83d2.js"><link rel="prefetch" href="/assets/js/202.b4862153.js"><link rel="prefetch" href="/assets/js/203.3ea6407a.js"><link rel="prefetch" href="/assets/js/204.d5771155.js"><link rel="prefetch" href="/assets/js/205.260b08fc.js"><link rel="prefetch" href="/assets/js/206.5c87e97a.js"><link rel="prefetch" href="/assets/js/207.792945a8.js"><link rel="prefetch" href="/assets/js/208.065c0a88.js"><link rel="prefetch" href="/assets/js/209.ac115480.js"><link rel="prefetch" href="/assets/js/21.19bed6d4.js"><link rel="prefetch" href="/assets/js/210.486d97b8.js"><link rel="prefetch" href="/assets/js/211.935b45cf.js"><link rel="prefetch" href="/assets/js/212.41cb4312.js"><link rel="prefetch" href="/assets/js/213.5bf4ef36.js"><link rel="prefetch" href="/assets/js/214.310b7eb9.js"><link rel="prefetch" href="/assets/js/215.fcf65cd6.js"><link rel="prefetch" href="/assets/js/216.72772cf8.js"><link rel="prefetch" href="/assets/js/217.a97d9cf5.js"><link rel="prefetch" href="/assets/js/218.c339e296.js"><link rel="prefetch" href="/assets/js/219.64f4aad4.js"><link rel="prefetch" href="/assets/js/22.bbb32a8a.js"><link rel="prefetch" href="/assets/js/220.0f823d71.js"><link rel="prefetch" href="/assets/js/221.9dc03530.js"><link rel="prefetch" href="/assets/js/222.3f1adfd2.js"><link rel="prefetch" href="/assets/js/223.c5e18b54.js"><link rel="prefetch" href="/assets/js/224.9afe5b55.js"><link rel="prefetch" href="/assets/js/225.c5742146.js"><link rel="prefetch" href="/assets/js/226.3fbb6750.js"><link rel="prefetch" href="/assets/js/227.c7b895de.js"><link rel="prefetch" href="/assets/js/228.3136d3e6.js"><link rel="prefetch" href="/assets/js/229.e2700a9f.js"><link rel="prefetch" href="/assets/js/23.3485d302.js"><link rel="prefetch" href="/assets/js/230.d4168181.js"><link rel="prefetch" href="/assets/js/231.982aa302.js"><link rel="prefetch" href="/assets/js/232.a0fb330e.js"><link rel="prefetch" href="/assets/js/233.1c3d4788.js"><link rel="prefetch" href="/assets/js/234.173bc9ff.js"><link rel="prefetch" href="/assets/js/235.42b52eaa.js"><link rel="prefetch" href="/assets/js/236.19cc2e91.js"><link rel="prefetch" href="/assets/js/237.a8022734.js"><link rel="prefetch" href="/assets/js/238.270ffb8b.js"><link rel="prefetch" href="/assets/js/239.c614b121.js"><link rel="prefetch" href="/assets/js/24.fd26d9a8.js"><link rel="prefetch" href="/assets/js/240.8102fe5b.js"><link rel="prefetch" href="/assets/js/241.6b0234dd.js"><link rel="prefetch" href="/assets/js/242.76cbaec8.js"><link rel="prefetch" href="/assets/js/243.2016d6c8.js"><link rel="prefetch" href="/assets/js/244.f97f76a2.js"><link rel="prefetch" href="/assets/js/245.f6ec8788.js"><link rel="prefetch" href="/assets/js/246.ddd9453d.js"><link rel="prefetch" href="/assets/js/247.908d3534.js"><link rel="prefetch" href="/assets/js/248.ea210020.js"><link rel="prefetch" href="/assets/js/249.75b99d60.js"><link rel="prefetch" href="/assets/js/25.c18b9029.js"><link rel="prefetch" href="/assets/js/250.f6d01023.js"><link rel="prefetch" href="/assets/js/251.d28b3e92.js"><link rel="prefetch" href="/assets/js/252.a797fefe.js"><link rel="prefetch" href="/assets/js/253.21e7597e.js"><link rel="prefetch" href="/assets/js/254.bc582581.js"><link rel="prefetch" href="/assets/js/255.96dda5cd.js"><link rel="prefetch" href="/assets/js/256.cfb54248.js"><link rel="prefetch" href="/assets/js/257.2f9e5d06.js"><link rel="prefetch" href="/assets/js/258.313ce88c.js"><link rel="prefetch" href="/assets/js/259.8ceeb42e.js"><link rel="prefetch" href="/assets/js/26.982287e3.js"><link rel="prefetch" href="/assets/js/260.c36c3f8b.js"><link rel="prefetch" href="/assets/js/261.f4b64ba4.js"><link rel="prefetch" href="/assets/js/262.f836bc73.js"><link rel="prefetch" href="/assets/js/263.e5b2f741.js"><link rel="prefetch" href="/assets/js/264.431ff6e9.js"><link rel="prefetch" href="/assets/js/265.7a548ff8.js"><link rel="prefetch" href="/assets/js/266.2c4515b7.js"><link rel="prefetch" href="/assets/js/267.8459b0e2.js"><link rel="prefetch" href="/assets/js/268.6d2da056.js"><link rel="prefetch" href="/assets/js/269.e1551474.js"><link rel="prefetch" href="/assets/js/27.0f443541.js"><link rel="prefetch" href="/assets/js/270.463e6189.js"><link rel="prefetch" href="/assets/js/271.a0b8074f.js"><link rel="prefetch" href="/assets/js/272.4ed550b0.js"><link rel="prefetch" href="/assets/js/273.24922593.js"><link rel="prefetch" href="/assets/js/274.19a982d2.js"><link rel="prefetch" href="/assets/js/275.56a9ff89.js"><link rel="prefetch" href="/assets/js/276.837dfc8e.js"><link rel="prefetch" href="/assets/js/277.5d3d5398.js"><link rel="prefetch" href="/assets/js/278.0f73ea48.js"><link rel="prefetch" href="/assets/js/279.4889bf6f.js"><link rel="prefetch" href="/assets/js/28.88d16d00.js"><link rel="prefetch" href="/assets/js/280.b11875cd.js"><link rel="prefetch" href="/assets/js/281.02f2872b.js"><link rel="prefetch" href="/assets/js/282.c854cb96.js"><link rel="prefetch" href="/assets/js/283.03e72b33.js"><link rel="prefetch" href="/assets/js/284.919ca53f.js"><link rel="prefetch" href="/assets/js/285.ea19daf3.js"><link rel="prefetch" href="/assets/js/286.c5fc59db.js"><link rel="prefetch" href="/assets/js/287.b1e93490.js"><link rel="prefetch" href="/assets/js/288.d782632e.js"><link rel="prefetch" href="/assets/js/289.e1564c87.js"><link rel="prefetch" href="/assets/js/29.3bf74904.js"><link rel="prefetch" href="/assets/js/290.83a12cc7.js"><link rel="prefetch" href="/assets/js/291.61945a93.js"><link rel="prefetch" href="/assets/js/292.04ae3c4d.js"><link rel="prefetch" href="/assets/js/293.7fb4c54a.js"><link rel="prefetch" href="/assets/js/294.fc186fb7.js"><link rel="prefetch" href="/assets/js/295.2287af92.js"><link rel="prefetch" href="/assets/js/296.eb9a1cd9.js"><link rel="prefetch" href="/assets/js/297.a832a919.js"><link rel="prefetch" href="/assets/js/298.d2bbe359.js"><link rel="prefetch" href="/assets/js/299.4ca471b5.js"><link rel="prefetch" href="/assets/js/3.fdffdc9e.js"><link rel="prefetch" href="/assets/js/30.45b83bdc.js"><link rel="prefetch" href="/assets/js/300.a3a61bd5.js"><link rel="prefetch" href="/assets/js/301.f9bc6073.js"><link rel="prefetch" href="/assets/js/302.5a839eee.js"><link rel="prefetch" href="/assets/js/303.64b93360.js"><link rel="prefetch" href="/assets/js/304.744806cc.js"><link rel="prefetch" href="/assets/js/305.b7dfea93.js"><link rel="prefetch" href="/assets/js/306.d0780e9f.js"><link rel="prefetch" href="/assets/js/307.17a9905d.js"><link rel="prefetch" href="/assets/js/308.60d7587b.js"><link rel="prefetch" href="/assets/js/309.e4fab260.js"><link rel="prefetch" href="/assets/js/31.ca64ff09.js"><link rel="prefetch" href="/assets/js/310.274f6a46.js"><link rel="prefetch" href="/assets/js/311.880ab837.js"><link rel="prefetch" href="/assets/js/312.a1214dfb.js"><link rel="prefetch" href="/assets/js/313.b5123193.js"><link rel="prefetch" href="/assets/js/314.c0cb799e.js"><link rel="prefetch" href="/assets/js/315.801f3bce.js"><link rel="prefetch" href="/assets/js/316.db06c849.js"><link rel="prefetch" href="/assets/js/317.3a938872.js"><link rel="prefetch" href="/assets/js/318.2b558e26.js"><link rel="prefetch" href="/assets/js/319.4b16531b.js"><link rel="prefetch" href="/assets/js/32.841cb9c3.js"><link rel="prefetch" href="/assets/js/320.80d51d18.js"><link rel="prefetch" href="/assets/js/321.4bc794ab.js"><link rel="prefetch" href="/assets/js/322.e990eab1.js"><link rel="prefetch" href="/assets/js/323.2c5fc401.js"><link rel="prefetch" href="/assets/js/324.cc8efeea.js"><link rel="prefetch" href="/assets/js/325.559c39e0.js"><link rel="prefetch" href="/assets/js/326.1d403523.js"><link rel="prefetch" href="/assets/js/327.a112d0aa.js"><link rel="prefetch" href="/assets/js/328.23c69dcd.js"><link rel="prefetch" href="/assets/js/329.46cc1f38.js"><link rel="prefetch" href="/assets/js/33.55a5946e.js"><link rel="prefetch" href="/assets/js/330.346dd9e6.js"><link rel="prefetch" href="/assets/js/331.8a7957c1.js"><link rel="prefetch" href="/assets/js/332.8af5ae9f.js"><link rel="prefetch" href="/assets/js/333.1749718c.js"><link rel="prefetch" href="/assets/js/334.24fd8856.js"><link rel="prefetch" href="/assets/js/335.7a22b6f1.js"><link rel="prefetch" href="/assets/js/336.370f4a32.js"><link rel="prefetch" href="/assets/js/337.551244fa.js"><link rel="prefetch" href="/assets/js/338.cf7df09e.js"><link rel="prefetch" href="/assets/js/339.9f40d542.js"><link rel="prefetch" href="/assets/js/34.58e88bc4.js"><link rel="prefetch" href="/assets/js/340.a4778f35.js"><link rel="prefetch" href="/assets/js/341.62ad5b97.js"><link rel="prefetch" href="/assets/js/342.7fe5606f.js"><link rel="prefetch" href="/assets/js/343.950e9613.js"><link rel="prefetch" href="/assets/js/344.d03664af.js"><link rel="prefetch" href="/assets/js/345.e22d0d2e.js"><link rel="prefetch" href="/assets/js/346.97509ae7.js"><link rel="prefetch" href="/assets/js/347.f2f7cf43.js"><link rel="prefetch" href="/assets/js/348.38668899.js"><link rel="prefetch" href="/assets/js/349.70db921c.js"><link rel="prefetch" href="/assets/js/35.1e62cae0.js"><link rel="prefetch" href="/assets/js/350.247c4529.js"><link rel="prefetch" href="/assets/js/351.89ea63f9.js"><link rel="prefetch" href="/assets/js/352.d824931e.js"><link rel="prefetch" href="/assets/js/353.0dd9226e.js"><link rel="prefetch" href="/assets/js/354.54d23cd0.js"><link rel="prefetch" href="/assets/js/355.74305253.js"><link rel="prefetch" href="/assets/js/356.beae179b.js"><link rel="prefetch" href="/assets/js/357.77c5e2b6.js"><link rel="prefetch" href="/assets/js/358.a03f6826.js"><link rel="prefetch" href="/assets/js/359.a669ae58.js"><link rel="prefetch" href="/assets/js/36.c07719fa.js"><link rel="prefetch" href="/assets/js/360.29412a97.js"><link rel="prefetch" href="/assets/js/361.9f20bacb.js"><link rel="prefetch" href="/assets/js/362.4b56f50e.js"><link rel="prefetch" href="/assets/js/363.eb0e82b6.js"><link rel="prefetch" href="/assets/js/364.f0c8d6b7.js"><link rel="prefetch" href="/assets/js/365.9bb6da48.js"><link rel="prefetch" href="/assets/js/366.46548b2e.js"><link rel="prefetch" href="/assets/js/367.046fd3ec.js"><link rel="prefetch" href="/assets/js/368.628e070b.js"><link rel="prefetch" href="/assets/js/369.b9c5b24d.js"><link rel="prefetch" href="/assets/js/37.3af8a6ed.js"><link rel="prefetch" href="/assets/js/370.c23530cf.js"><link rel="prefetch" href="/assets/js/371.95370ed2.js"><link rel="prefetch" href="/assets/js/372.9495a507.js"><link rel="prefetch" href="/assets/js/373.f028cc68.js"><link rel="prefetch" href="/assets/js/374.3e53f46f.js"><link rel="prefetch" href="/assets/js/375.518c917e.js"><link rel="prefetch" href="/assets/js/376.ce62a6ba.js"><link rel="prefetch" href="/assets/js/377.b898d613.js"><link rel="prefetch" href="/assets/js/378.79b57379.js"><link rel="prefetch" href="/assets/js/379.4dfbb2ca.js"><link rel="prefetch" href="/assets/js/38.ba5a8144.js"><link rel="prefetch" href="/assets/js/380.4b99b123.js"><link rel="prefetch" href="/assets/js/381.1d9400e0.js"><link rel="prefetch" href="/assets/js/382.a8e6d0f6.js"><link rel="prefetch" href="/assets/js/383.c4e5d104.js"><link rel="prefetch" href="/assets/js/384.9cdf8e35.js"><link rel="prefetch" href="/assets/js/385.45aa179b.js"><link rel="prefetch" href="/assets/js/386.8311b208.js"><link rel="prefetch" href="/assets/js/387.f6bbd961.js"><link rel="prefetch" href="/assets/js/388.7371b3f6.js"><link rel="prefetch" href="/assets/js/389.0a4b3747.js"><link rel="prefetch" href="/assets/js/39.2fe6d104.js"><link rel="prefetch" href="/assets/js/390.d1cf73c9.js"><link rel="prefetch" href="/assets/js/391.482ba073.js"><link rel="prefetch" href="/assets/js/392.4f8a05b7.js"><link rel="prefetch" href="/assets/js/393.4491f154.js"><link rel="prefetch" href="/assets/js/394.2914f192.js"><link rel="prefetch" href="/assets/js/395.4a64254f.js"><link rel="prefetch" href="/assets/js/396.72269aeb.js"><link rel="prefetch" href="/assets/js/397.1f4effbc.js"><link rel="prefetch" href="/assets/js/398.c2d2aabb.js"><link rel="prefetch" href="/assets/js/399.a185d0fb.js"><link rel="prefetch" href="/assets/js/40.c4391fa7.js"><link rel="prefetch" href="/assets/js/400.fcf8efbe.js"><link rel="prefetch" href="/assets/js/401.532fd68f.js"><link rel="prefetch" href="/assets/js/402.32d77c13.js"><link rel="prefetch" href="/assets/js/403.c3f0db2a.js"><link rel="prefetch" href="/assets/js/404.3c06849d.js"><link rel="prefetch" href="/assets/js/405.67c784ca.js"><link rel="prefetch" href="/assets/js/406.69f3d5f2.js"><link rel="prefetch" href="/assets/js/407.58b1a0ff.js"><link rel="prefetch" href="/assets/js/408.25d4afc7.js"><link rel="prefetch" href="/assets/js/409.9d875160.js"><link rel="prefetch" href="/assets/js/41.cd06050e.js"><link rel="prefetch" href="/assets/js/410.a2cbb382.js"><link rel="prefetch" href="/assets/js/411.1ab74328.js"><link rel="prefetch" href="/assets/js/412.3720e6b6.js"><link rel="prefetch" href="/assets/js/413.642fda9e.js"><link rel="prefetch" href="/assets/js/414.626616fe.js"><link rel="prefetch" href="/assets/js/415.69560bc1.js"><link rel="prefetch" href="/assets/js/416.b563bf5a.js"><link rel="prefetch" href="/assets/js/417.78c8269d.js"><link rel="prefetch" href="/assets/js/418.02352bba.js"><link rel="prefetch" href="/assets/js/419.852a8969.js"><link rel="prefetch" href="/assets/js/42.1dfe9464.js"><link rel="prefetch" href="/assets/js/420.1ee3bef9.js"><link rel="prefetch" href="/assets/js/421.3322b826.js"><link rel="prefetch" href="/assets/js/422.d69fbae2.js"><link rel="prefetch" href="/assets/js/423.2264f8f6.js"><link rel="prefetch" href="/assets/js/424.9f4608d1.js"><link rel="prefetch" href="/assets/js/425.0a03bfd7.js"><link rel="prefetch" href="/assets/js/426.596bcc53.js"><link rel="prefetch" href="/assets/js/427.9013a4ad.js"><link rel="prefetch" href="/assets/js/428.0ace0eff.js"><link rel="prefetch" href="/assets/js/429.2b0f0aed.js"><link rel="prefetch" href="/assets/js/43.c6ddee4a.js"><link rel="prefetch" href="/assets/js/430.067e6bd9.js"><link rel="prefetch" href="/assets/js/431.c3e40c7f.js"><link rel="prefetch" href="/assets/js/432.c2006d6b.js"><link rel="prefetch" href="/assets/js/433.7c1ad41a.js"><link rel="prefetch" href="/assets/js/434.08b6b350.js"><link rel="prefetch" href="/assets/js/435.77c3fb07.js"><link rel="prefetch" href="/assets/js/436.f26df4cc.js"><link rel="prefetch" href="/assets/js/437.5a1a7204.js"><link rel="prefetch" href="/assets/js/438.4824091d.js"><link rel="prefetch" href="/assets/js/439.60f80075.js"><link rel="prefetch" href="/assets/js/44.94412af2.js"><link rel="prefetch" href="/assets/js/440.676ff944.js"><link rel="prefetch" href="/assets/js/441.35cdb429.js"><link rel="prefetch" href="/assets/js/442.b9187208.js"><link rel="prefetch" href="/assets/js/443.1828417b.js"><link rel="prefetch" href="/assets/js/444.045b86d9.js"><link rel="prefetch" href="/assets/js/445.00d5f7ea.js"><link rel="prefetch" href="/assets/js/446.9325d13e.js"><link rel="prefetch" href="/assets/js/447.79ea8850.js"><link rel="prefetch" href="/assets/js/448.e85c57b9.js"><link rel="prefetch" href="/assets/js/449.86fdf75b.js"><link rel="prefetch" href="/assets/js/45.57dbcd2d.js"><link rel="prefetch" href="/assets/js/450.94cec60d.js"><link rel="prefetch" href="/assets/js/451.d575f917.js"><link rel="prefetch" href="/assets/js/452.0d40bb40.js"><link rel="prefetch" href="/assets/js/453.46e19dca.js"><link rel="prefetch" href="/assets/js/454.02e71c04.js"><link rel="prefetch" href="/assets/js/455.1a13c50f.js"><link rel="prefetch" href="/assets/js/456.a335b343.js"><link rel="prefetch" href="/assets/js/457.86018cc0.js"><link rel="prefetch" href="/assets/js/458.2a2c141a.js"><link rel="prefetch" href="/assets/js/459.ad6fe269.js"><link rel="prefetch" href="/assets/js/46.7236bc19.js"><link rel="prefetch" href="/assets/js/460.c4e71ed8.js"><link rel="prefetch" href="/assets/js/461.3f83ecdb.js"><link rel="prefetch" href="/assets/js/462.2e405001.js"><link rel="prefetch" href="/assets/js/463.72695c41.js"><link rel="prefetch" href="/assets/js/464.6ff22746.js"><link rel="prefetch" href="/assets/js/465.37085e97.js"><link rel="prefetch" href="/assets/js/466.9a26928e.js"><link rel="prefetch" href="/assets/js/467.c20824d6.js"><link rel="prefetch" href="/assets/js/468.b95ba035.js"><link rel="prefetch" href="/assets/js/469.80a8afa2.js"><link rel="prefetch" href="/assets/js/47.e151dcf3.js"><link rel="prefetch" href="/assets/js/470.41cf6528.js"><link rel="prefetch" href="/assets/js/471.58140fc7.js"><link rel="prefetch" href="/assets/js/472.bb382173.js"><link rel="prefetch" href="/assets/js/473.42097691.js"><link rel="prefetch" href="/assets/js/474.96e0242f.js"><link rel="prefetch" href="/assets/js/475.32b7dde8.js"><link rel="prefetch" href="/assets/js/476.a3cb5fd8.js"><link rel="prefetch" href="/assets/js/477.25a73ede.js"><link rel="prefetch" href="/assets/js/478.78628661.js"><link rel="prefetch" href="/assets/js/479.fad7ac1b.js"><link rel="prefetch" href="/assets/js/48.d697d127.js"><link rel="prefetch" href="/assets/js/480.c9e69567.js"><link rel="prefetch" href="/assets/js/481.eccf17fb.js"><link rel="prefetch" href="/assets/js/482.37463424.js"><link rel="prefetch" href="/assets/js/483.cacb1fa2.js"><link rel="prefetch" href="/assets/js/484.721bd234.js"><link rel="prefetch" href="/assets/js/485.a502d080.js"><link rel="prefetch" href="/assets/js/486.1d1b800a.js"><link rel="prefetch" href="/assets/js/487.9c3bdb57.js"><link rel="prefetch" href="/assets/js/488.37a39559.js"><link rel="prefetch" href="/assets/js/489.fba05717.js"><link rel="prefetch" href="/assets/js/49.9055177d.js"><link rel="prefetch" href="/assets/js/490.03609528.js"><link rel="prefetch" href="/assets/js/491.aa1c5884.js"><link rel="prefetch" href="/assets/js/492.203ec210.js"><link rel="prefetch" href="/assets/js/493.ee985c04.js"><link rel="prefetch" href="/assets/js/494.86b07d14.js"><link rel="prefetch" href="/assets/js/495.98873ba3.js"><link rel="prefetch" href="/assets/js/496.e7ba4786.js"><link rel="prefetch" href="/assets/js/497.3e0a5367.js"><link rel="prefetch" href="/assets/js/498.06be358c.js"><link rel="prefetch" href="/assets/js/499.3e37f251.js"><link rel="prefetch" href="/assets/js/5.8e0f31a8.js"><link rel="prefetch" href="/assets/js/50.7d729a31.js"><link rel="prefetch" href="/assets/js/500.617d3051.js"><link rel="prefetch" href="/assets/js/501.b27687a5.js"><link rel="prefetch" href="/assets/js/502.5395b3e4.js"><link rel="prefetch" href="/assets/js/503.89e2eb27.js"><link rel="prefetch" href="/assets/js/504.0992440f.js"><link rel="prefetch" href="/assets/js/505.7f77a768.js"><link rel="prefetch" href="/assets/js/506.0202f649.js"><link rel="prefetch" href="/assets/js/507.9daa5ebe.js"><link rel="prefetch" href="/assets/js/508.42c24352.js"><link rel="prefetch" href="/assets/js/509.2b455bcf.js"><link rel="prefetch" href="/assets/js/51.8ac40a74.js"><link rel="prefetch" href="/assets/js/510.243b57b1.js"><link rel="prefetch" href="/assets/js/511.aed7add5.js"><link rel="prefetch" href="/assets/js/512.a6f90c00.js"><link rel="prefetch" href="/assets/js/513.dc25b699.js"><link rel="prefetch" href="/assets/js/514.2d3f601b.js"><link rel="prefetch" href="/assets/js/515.c9536dc6.js"><link rel="prefetch" href="/assets/js/516.3bef15f6.js"><link rel="prefetch" href="/assets/js/517.d1ca4793.js"><link rel="prefetch" href="/assets/js/518.6ada75a0.js"><link rel="prefetch" href="/assets/js/519.14605ccd.js"><link rel="prefetch" href="/assets/js/52.e9a37852.js"><link rel="prefetch" href="/assets/js/520.56c72fd3.js"><link rel="prefetch" href="/assets/js/521.996866d5.js"><link rel="prefetch" href="/assets/js/522.b1d52201.js"><link rel="prefetch" href="/assets/js/523.ec4416e2.js"><link rel="prefetch" href="/assets/js/524.5078a88b.js"><link rel="prefetch" href="/assets/js/525.1e50b66d.js"><link rel="prefetch" href="/assets/js/526.326c0df8.js"><link rel="prefetch" href="/assets/js/527.eda95359.js"><link rel="prefetch" href="/assets/js/528.1220c862.js"><link rel="prefetch" href="/assets/js/529.84ca2fc9.js"><link rel="prefetch" href="/assets/js/53.662f7629.js"><link rel="prefetch" href="/assets/js/530.3c610b14.js"><link rel="prefetch" href="/assets/js/531.befa21f6.js"><link rel="prefetch" href="/assets/js/532.2a139b0d.js"><link rel="prefetch" href="/assets/js/533.2a363eec.js"><link rel="prefetch" href="/assets/js/534.627530f2.js"><link rel="prefetch" href="/assets/js/535.6f6c1c08.js"><link rel="prefetch" href="/assets/js/536.9e4079ec.js"><link rel="prefetch" href="/assets/js/537.6d984841.js"><link rel="prefetch" href="/assets/js/538.d616665d.js"><link rel="prefetch" href="/assets/js/539.a550f856.js"><link rel="prefetch" href="/assets/js/54.b087d453.js"><link rel="prefetch" href="/assets/js/540.805cadab.js"><link rel="prefetch" href="/assets/js/541.c548f4cb.js"><link rel="prefetch" href="/assets/js/542.2c125c6e.js"><link rel="prefetch" href="/assets/js/543.2ba186c3.js"><link rel="prefetch" href="/assets/js/544.dc3bdc1f.js"><link rel="prefetch" href="/assets/js/545.27726268.js"><link rel="prefetch" href="/assets/js/546.477ab687.js"><link rel="prefetch" href="/assets/js/547.532d4254.js"><link rel="prefetch" href="/assets/js/548.a9f5d812.js"><link rel="prefetch" href="/assets/js/549.e79854a2.js"><link rel="prefetch" href="/assets/js/55.f3449953.js"><link rel="prefetch" href="/assets/js/550.0018978e.js"><link rel="prefetch" href="/assets/js/551.85ea3f42.js"><link rel="prefetch" href="/assets/js/552.92c8a07f.js"><link rel="prefetch" href="/assets/js/553.ff23d853.js"><link rel="prefetch" href="/assets/js/554.e038716e.js"><link rel="prefetch" href="/assets/js/555.1d0bbc98.js"><link rel="prefetch" href="/assets/js/556.8bfdc16e.js"><link rel="prefetch" href="/assets/js/557.f9c568ec.js"><link rel="prefetch" href="/assets/js/558.4d1668c1.js"><link rel="prefetch" href="/assets/js/559.2866f6c1.js"><link rel="prefetch" href="/assets/js/56.59355cc0.js"><link rel="prefetch" href="/assets/js/560.8be6511c.js"><link rel="prefetch" href="/assets/js/561.46c903d5.js"><link rel="prefetch" href="/assets/js/562.ab65b6b1.js"><link rel="prefetch" href="/assets/js/563.8862beac.js"><link rel="prefetch" href="/assets/js/564.a1217499.js"><link rel="prefetch" href="/assets/js/565.812563e1.js"><link rel="prefetch" href="/assets/js/566.db13ab2c.js"><link rel="prefetch" href="/assets/js/567.c36921e6.js"><link rel="prefetch" href="/assets/js/568.78a775ce.js"><link rel="prefetch" href="/assets/js/569.b95b76b1.js"><link rel="prefetch" href="/assets/js/57.2f1d42b9.js"><link rel="prefetch" href="/assets/js/570.325f3d7d.js"><link rel="prefetch" href="/assets/js/571.4f2293d0.js"><link rel="prefetch" href="/assets/js/572.5fd22a4c.js"><link rel="prefetch" href="/assets/js/573.8e02a1da.js"><link rel="prefetch" href="/assets/js/574.06d188f7.js"><link rel="prefetch" href="/assets/js/575.5632c20e.js"><link rel="prefetch" href="/assets/js/576.96a2a270.js"><link rel="prefetch" href="/assets/js/577.73136e85.js"><link rel="prefetch" href="/assets/js/578.8a9dfe96.js"><link rel="prefetch" href="/assets/js/579.ac11f2e7.js"><link rel="prefetch" href="/assets/js/58.adc23c7d.js"><link rel="prefetch" href="/assets/js/580.b7e404ee.js"><link rel="prefetch" href="/assets/js/581.3d66e6f5.js"><link rel="prefetch" href="/assets/js/582.03ff1afd.js"><link rel="prefetch" href="/assets/js/583.34379369.js"><link rel="prefetch" href="/assets/js/584.b2bdb5f1.js"><link rel="prefetch" href="/assets/js/585.a18bec8c.js"><link rel="prefetch" href="/assets/js/586.14aa9831.js"><link rel="prefetch" href="/assets/js/587.9a126589.js"><link rel="prefetch" href="/assets/js/588.2057344d.js"><link rel="prefetch" href="/assets/js/589.b436a9cc.js"><link rel="prefetch" href="/assets/js/59.5d048440.js"><link rel="prefetch" href="/assets/js/590.592bbc58.js"><link rel="prefetch" href="/assets/js/591.6e930cfa.js"><link rel="prefetch" href="/assets/js/592.71a97597.js"><link rel="prefetch" href="/assets/js/593.dc07ff66.js"><link rel="prefetch" href="/assets/js/594.eb50ca30.js"><link rel="prefetch" href="/assets/js/595.ee305a39.js"><link rel="prefetch" href="/assets/js/596.12ccdcc2.js"><link rel="prefetch" href="/assets/js/597.4232dc87.js"><link rel="prefetch" href="/assets/js/598.301fb91d.js"><link rel="prefetch" href="/assets/js/599.3b0d9200.js"><link rel="prefetch" href="/assets/js/6.d2c1cace.js"><link rel="prefetch" href="/assets/js/60.79d7525e.js"><link rel="prefetch" href="/assets/js/600.07fd19bf.js"><link rel="prefetch" href="/assets/js/601.2ee5541b.js"><link rel="prefetch" href="/assets/js/602.6afe2d96.js"><link rel="prefetch" href="/assets/js/603.596ec00e.js"><link rel="prefetch" href="/assets/js/604.7a3cf3db.js"><link rel="prefetch" href="/assets/js/605.994d51c9.js"><link rel="prefetch" href="/assets/js/606.a9a8770f.js"><link rel="prefetch" href="/assets/js/607.43b79b41.js"><link rel="prefetch" href="/assets/js/608.0b4acd46.js"><link rel="prefetch" href="/assets/js/609.05f790b6.js"><link rel="prefetch" href="/assets/js/61.28d832c8.js"><link rel="prefetch" href="/assets/js/610.a76080e2.js"><link rel="prefetch" href="/assets/js/611.aac62f8c.js"><link rel="prefetch" href="/assets/js/612.dab750ed.js"><link rel="prefetch" href="/assets/js/613.ed00f66f.js"><link rel="prefetch" href="/assets/js/614.5c2e2174.js"><link rel="prefetch" href="/assets/js/615.aa4a2211.js"><link rel="prefetch" href="/assets/js/616.efa83bb5.js"><link rel="prefetch" href="/assets/js/617.fd1d3a42.js"><link rel="prefetch" href="/assets/js/618.97f20249.js"><link rel="prefetch" href="/assets/js/619.2daa625c.js"><link rel="prefetch" href="/assets/js/62.d4789903.js"><link rel="prefetch" href="/assets/js/620.711ea20b.js"><link rel="prefetch" href="/assets/js/621.52ce89ad.js"><link rel="prefetch" href="/assets/js/622.353e6644.js"><link rel="prefetch" href="/assets/js/623.2fbe87de.js"><link rel="prefetch" href="/assets/js/624.814d01db.js"><link rel="prefetch" href="/assets/js/625.b82082b3.js"><link rel="prefetch" href="/assets/js/626.528b1ee4.js"><link rel="prefetch" href="/assets/js/627.5f11a78d.js"><link rel="prefetch" href="/assets/js/628.a8093721.js"><link rel="prefetch" href="/assets/js/629.d5e19e18.js"><link rel="prefetch" href="/assets/js/63.c74a8c76.js"><link rel="prefetch" href="/assets/js/630.02882bbd.js"><link rel="prefetch" href="/assets/js/631.732c84da.js"><link rel="prefetch" href="/assets/js/632.5fbab106.js"><link rel="prefetch" href="/assets/js/633.5d89a312.js"><link rel="prefetch" href="/assets/js/634.1c572e96.js"><link rel="prefetch" href="/assets/js/635.ad976eb1.js"><link rel="prefetch" href="/assets/js/636.5feb9681.js"><link rel="prefetch" href="/assets/js/637.cb0c3454.js"><link rel="prefetch" href="/assets/js/638.ea994f8d.js"><link rel="prefetch" href="/assets/js/639.73f0f98f.js"><link rel="prefetch" href="/assets/js/64.5c2ce47c.js"><link rel="prefetch" href="/assets/js/640.11b6ae93.js"><link rel="prefetch" href="/assets/js/641.7868b186.js"><link rel="prefetch" href="/assets/js/642.e8767051.js"><link rel="prefetch" href="/assets/js/643.68cdc337.js"><link rel="prefetch" href="/assets/js/644.ab1dd3f8.js"><link rel="prefetch" href="/assets/js/645.9baee613.js"><link rel="prefetch" href="/assets/js/646.b7322c06.js"><link rel="prefetch" href="/assets/js/647.a54533eb.js"><link rel="prefetch" href="/assets/js/648.be09619e.js"><link rel="prefetch" href="/assets/js/649.7f0d8e5a.js"><link rel="prefetch" href="/assets/js/65.eeaeced2.js"><link rel="prefetch" href="/assets/js/650.76b82c47.js"><link rel="prefetch" href="/assets/js/651.16c54a7f.js"><link rel="prefetch" href="/assets/js/652.84b21a48.js"><link rel="prefetch" href="/assets/js/653.4cd433a4.js"><link rel="prefetch" href="/assets/js/654.028a09f7.js"><link rel="prefetch" href="/assets/js/655.6ea326f0.js"><link rel="prefetch" href="/assets/js/656.81430fce.js"><link rel="prefetch" href="/assets/js/657.80122414.js"><link rel="prefetch" href="/assets/js/658.f6df38cc.js"><link rel="prefetch" href="/assets/js/659.7259e794.js"><link rel="prefetch" href="/assets/js/66.82127a17.js"><link rel="prefetch" href="/assets/js/660.98516108.js"><link rel="prefetch" href="/assets/js/661.112a7292.js"><link rel="prefetch" href="/assets/js/662.5c8a28ec.js"><link rel="prefetch" href="/assets/js/663.077ee92c.js"><link rel="prefetch" href="/assets/js/664.af6abab0.js"><link rel="prefetch" href="/assets/js/665.4a6dd7cf.js"><link rel="prefetch" href="/assets/js/666.6849e863.js"><link rel="prefetch" href="/assets/js/667.2d7f1a4f.js"><link rel="prefetch" href="/assets/js/668.632ad65e.js"><link rel="prefetch" href="/assets/js/669.ed934673.js"><link rel="prefetch" href="/assets/js/67.1addb651.js"><link rel="prefetch" href="/assets/js/670.ad359f6c.js"><link rel="prefetch" href="/assets/js/671.da72d19f.js"><link rel="prefetch" href="/assets/js/672.b0a54425.js"><link rel="prefetch" href="/assets/js/673.e846e355.js"><link rel="prefetch" href="/assets/js/674.64f4fcef.js"><link rel="prefetch" href="/assets/js/675.8c890817.js"><link rel="prefetch" href="/assets/js/676.51e7ee04.js"><link rel="prefetch" href="/assets/js/677.275caba9.js"><link rel="prefetch" href="/assets/js/678.4cd1c7f0.js"><link rel="prefetch" href="/assets/js/679.4a6e7cf6.js"><link rel="prefetch" href="/assets/js/68.fea47cd8.js"><link rel="prefetch" href="/assets/js/680.518ccb16.js"><link rel="prefetch" href="/assets/js/681.711f1d80.js"><link rel="prefetch" href="/assets/js/682.4ada2fa5.js"><link rel="prefetch" href="/assets/js/683.10a950c2.js"><link rel="prefetch" href="/assets/js/684.e23fb1ca.js"><link rel="prefetch" href="/assets/js/685.135ddd3f.js"><link rel="prefetch" href="/assets/js/686.c35e3b69.js"><link rel="prefetch" href="/assets/js/687.ba6bae1a.js"><link rel="prefetch" href="/assets/js/688.b72c476e.js"><link rel="prefetch" href="/assets/js/689.bcae387b.js"><link rel="prefetch" href="/assets/js/69.ba3f689b.js"><link rel="prefetch" href="/assets/js/690.9c08fe5c.js"><link rel="prefetch" href="/assets/js/691.61a40a1e.js"><link rel="prefetch" href="/assets/js/692.3444c056.js"><link rel="prefetch" href="/assets/js/693.ef0ec2c6.js"><link rel="prefetch" href="/assets/js/694.5ab89bac.js"><link rel="prefetch" href="/assets/js/695.9d7f7ab3.js"><link rel="prefetch" href="/assets/js/696.e039c186.js"><link rel="prefetch" href="/assets/js/697.541c8727.js"><link rel="prefetch" href="/assets/js/698.c1ff332b.js"><link rel="prefetch" href="/assets/js/699.438dcf7b.js"><link rel="prefetch" href="/assets/js/7.f7c1767a.js"><link rel="prefetch" href="/assets/js/70.f385da67.js"><link rel="prefetch" href="/assets/js/700.5865a393.js"><link rel="prefetch" href="/assets/js/701.e8dec21f.js"><link rel="prefetch" href="/assets/js/702.2cc0474b.js"><link rel="prefetch" href="/assets/js/703.afe01f20.js"><link rel="prefetch" href="/assets/js/704.3209a4f9.js"><link rel="prefetch" href="/assets/js/705.0205a3cc.js"><link rel="prefetch" href="/assets/js/706.4aa9cbcf.js"><link rel="prefetch" href="/assets/js/707.c4ad7905.js"><link rel="prefetch" href="/assets/js/708.85278d9d.js"><link rel="prefetch" href="/assets/js/709.87229054.js"><link rel="prefetch" href="/assets/js/71.554284be.js"><link rel="prefetch" href="/assets/js/710.2af10eaa.js"><link rel="prefetch" href="/assets/js/711.9be75050.js"><link rel="prefetch" href="/assets/js/712.48cd5d53.js"><link rel="prefetch" href="/assets/js/713.e661320c.js"><link rel="prefetch" href="/assets/js/714.bef2dce8.js"><link rel="prefetch" href="/assets/js/715.19179011.js"><link rel="prefetch" href="/assets/js/716.1796aa0d.js"><link rel="prefetch" href="/assets/js/717.a98e1628.js"><link rel="prefetch" href="/assets/js/718.29ca4787.js"><link rel="prefetch" href="/assets/js/719.51a369dc.js"><link rel="prefetch" href="/assets/js/72.af6f3160.js"><link rel="prefetch" href="/assets/js/720.447874bc.js"><link rel="prefetch" href="/assets/js/721.79d0c6b3.js"><link rel="prefetch" href="/assets/js/722.16fd5cd6.js"><link rel="prefetch" href="/assets/js/723.08541008.js"><link rel="prefetch" href="/assets/js/724.0d63002c.js"><link rel="prefetch" href="/assets/js/725.3b0193f4.js"><link rel="prefetch" href="/assets/js/726.8ba77675.js"><link rel="prefetch" href="/assets/js/727.c3d230db.js"><link rel="prefetch" href="/assets/js/728.895a0232.js"><link rel="prefetch" href="/assets/js/729.b65d7cc5.js"><link rel="prefetch" href="/assets/js/73.dd7f760b.js"><link rel="prefetch" href="/assets/js/730.915212bc.js"><link rel="prefetch" href="/assets/js/731.e46742b3.js"><link rel="prefetch" href="/assets/js/732.e91b9ad7.js"><link rel="prefetch" href="/assets/js/733.69a8c8a8.js"><link rel="prefetch" href="/assets/js/734.efe76786.js"><link rel="prefetch" href="/assets/js/735.3a24b26e.js"><link rel="prefetch" href="/assets/js/736.77b4c561.js"><link rel="prefetch" href="/assets/js/737.7ceb22bb.js"><link rel="prefetch" href="/assets/js/738.1e368eaf.js"><link rel="prefetch" href="/assets/js/739.356a31d3.js"><link rel="prefetch" href="/assets/js/74.c1d40d4e.js"><link rel="prefetch" href="/assets/js/740.12c9b925.js"><link rel="prefetch" href="/assets/js/741.0b9ad9fe.js"><link rel="prefetch" href="/assets/js/742.24494adc.js"><link rel="prefetch" href="/assets/js/743.89616a62.js"><link rel="prefetch" href="/assets/js/744.5b4d9729.js"><link rel="prefetch" href="/assets/js/745.3d87cd79.js"><link rel="prefetch" href="/assets/js/746.ea089fc0.js"><link rel="prefetch" href="/assets/js/747.0b0147c7.js"><link rel="prefetch" href="/assets/js/748.5ef2828a.js"><link rel="prefetch" href="/assets/js/749.51404128.js"><link rel="prefetch" href="/assets/js/75.e3606ce5.js"><link rel="prefetch" href="/assets/js/750.78853490.js"><link rel="prefetch" href="/assets/js/751.f3f340da.js"><link rel="prefetch" href="/assets/js/752.230744ec.js"><link rel="prefetch" href="/assets/js/753.d28ec9b9.js"><link rel="prefetch" href="/assets/js/754.7715b2d4.js"><link rel="prefetch" href="/assets/js/755.bca6b28b.js"><link rel="prefetch" href="/assets/js/756.eab7ec40.js"><link rel="prefetch" href="/assets/js/757.7eaeaca7.js"><link rel="prefetch" href="/assets/js/758.6c1e4bc3.js"><link rel="prefetch" href="/assets/js/759.05496db6.js"><link rel="prefetch" href="/assets/js/76.d32d874c.js"><link rel="prefetch" href="/assets/js/760.b800ef03.js"><link rel="prefetch" href="/assets/js/761.1f1c2581.js"><link rel="prefetch" href="/assets/js/762.124a7df8.js"><link rel="prefetch" href="/assets/js/763.80acebc1.js"><link rel="prefetch" href="/assets/js/764.26789ad0.js"><link rel="prefetch" href="/assets/js/765.11be7b80.js"><link rel="prefetch" href="/assets/js/766.e15c7b64.js"><link rel="prefetch" href="/assets/js/767.19486613.js"><link rel="prefetch" href="/assets/js/768.e366642c.js"><link rel="prefetch" href="/assets/js/769.5dc7f640.js"><link rel="prefetch" href="/assets/js/77.b382528b.js"><link rel="prefetch" href="/assets/js/770.b69ed4f4.js"><link rel="prefetch" href="/assets/js/771.95cc445f.js"><link rel="prefetch" href="/assets/js/772.f1ae722e.js"><link rel="prefetch" href="/assets/js/773.3d6883b5.js"><link rel="prefetch" href="/assets/js/774.a660389a.js"><link rel="prefetch" href="/assets/js/775.830ad1b5.js"><link rel="prefetch" href="/assets/js/776.d38239b2.js"><link rel="prefetch" href="/assets/js/778.78ea1cac.js"><link rel="prefetch" href="/assets/js/779.36ccd4f9.js"><link rel="prefetch" href="/assets/js/78.81ab6d60.js"><link rel="prefetch" href="/assets/js/780.aa68c798.js"><link rel="prefetch" href="/assets/js/781.c5e2c08c.js"><link rel="prefetch" href="/assets/js/782.1dae0d0c.js"><link rel="prefetch" href="/assets/js/783.4e90f019.js"><link rel="prefetch" href="/assets/js/784.78f9eaf5.js"><link rel="prefetch" href="/assets/js/79.b4ce508e.js"><link rel="prefetch" href="/assets/js/8.ea326132.js"><link rel="prefetch" href="/assets/js/80.4754504b.js"><link rel="prefetch" href="/assets/js/81.43dfd504.js"><link rel="prefetch" href="/assets/js/82.e408157f.js"><link rel="prefetch" href="/assets/js/83.27fbf2f1.js"><link rel="prefetch" href="/assets/js/84.6359ed31.js"><link rel="prefetch" href="/assets/js/85.4e42e9f0.js"><link rel="prefetch" href="/assets/js/86.24e27821.js"><link rel="prefetch" href="/assets/js/87.80491108.js"><link rel="prefetch" href="/assets/js/88.b089eed9.js"><link rel="prefetch" href="/assets/js/89.6a1897a5.js"><link rel="prefetch" href="/assets/js/9.c38d03e2.js"><link rel="prefetch" href="/assets/js/90.c7e46f7c.js"><link rel="prefetch" href="/assets/js/91.34f75c51.js"><link rel="prefetch" href="/assets/js/92.59ce7416.js"><link rel="prefetch" href="/assets/js/93.fbef36de.js"><link rel="prefetch" href="/assets/js/94.6d9039d5.js"><link rel="prefetch" href="/assets/js/95.754f4178.js"><link rel="prefetch" href="/assets/js/96.1b4879be.js"><link rel="prefetch" href="/assets/js/97.02f4d7d0.js"><link rel="prefetch" href="/assets/js/98.d738ebbf.js"><link rel="prefetch" href="/assets/js/99.206bb16f.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.eee385d6.js">
    <link rel="stylesheet" href="/assets/css/0.styles.3d8a74c1.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container init with-sidebar"><header class="navbar px-5 flex items-center navbar-box-shadow fixed top-0 fixed top-0 inset-x-0 h-16 bg-white"><div class="flex h-full items-center justify-center md:hidden"><div class="flex cursor-pointer text-xl mr-4"><i class="bx bx-menu"></i></div></div> <div class="m-0 p-0 text-xl text-normal mr-8"><a href="/" class="router-link-active"><!----> <span><strong class="font-medium"><span class='text-blue'>Ts</span>.ED</strong></span></a></div> <div class="flex-1 h-full"><nav class="font-bold hidden lg:flex h-full"><ul class="flex items-center h-full text-gray-dark"><li class="mx-1 content-wrapper py-4"><a href="/getting-started/" title="Getting started | Ts.ED - A Node.js and TypeScript Framework on top of Express/Koa.js." class="link internal px-3 p-1 hover:bg-blue hover:text-white transition-all rounded-small cursor-pointer"><!----> 
        Getting started
      </a></li><li class="mx-1 content-wrapper py-4"><a href="/docs/configuration.html" title="Configuration | Ts.ED - A Node.js and TypeScript Framework on top of Express/Koa.js." class="link internal px-3 p-1 hover:bg-blue hover:text-white transition-all rounded-small cursor-pointer"><!----> 
        Configuration
      </a></li><li class="mx-1 content-wrapper py-4"><a href="/docs/controllers.html" title="Documentation | Ts.ED - A Node.js and TypeScript Framework on top of Express/Koa.js." class="link internal px-3 p-1 hover:bg-blue hover:text-white transition-all rounded-small cursor-pointer"><!----> 
        Documentation
      </a></li><li class="mx-1 content-wrapper"><div class="dropdown-wrapper relative flex items-center h-full px-3 py-4 -hover"><div class="flex items-center h-full w-full"><a title="More" class="flex items-center hover:text-gray-darker cursor-pointer transition-all duration-500 ease-in-out"><span></span> <i class="bx bx-dots-horizontal-rounded text-lg"></i></a></div> <div class="nav-dropdown absolute text-gray-darker z-2"> <ul class="reset-list text-gray-darker"><li><h4 class="p-0 px-4 m-1 mb-2 text-md">Plugins</h4> <ul class="dropdown-subitem-wrapper text-sm"><li class="dropdown-subitem"><a href="/tutorials/ajv.html" class="link internal block opacity-50 hover:opacity-100 p-0 px-6 mb-2 cursor-pointer transition-all duration-500 ease-in-out"><!----> 
            AJV
          </a></li><li class="dropdown-subitem"><a href="/tutorials/aws.html" class="link internal block opacity-50 hover:opacity-100 p-0 px-6 mb-2 cursor-pointer transition-all duration-500 ease-in-out"><!----> 
            AWS
          </a></li><li class="dropdown-subitem"><a href="/tutorials/passport.html" aria-current="page" class="link internal block opacity-50 hover:opacity-100 p-0 px-6 mb-2 cursor-pointer transition-all duration-500 ease-in-out router-link-exact-active router-link-active"><!----> 
            Passport.js
          </a></li><li class="dropdown-subitem"><a href="/tutorials/typeorm.html" class="link internal block opacity-50 hover:opacity-100 p-0 px-6 mb-2 cursor-pointer transition-all duration-500 ease-in-out"><!----> 
            TypeORM
          </a></li><li class="dropdown-subitem"><a href="/tutorials/mongoose.html" class="link internal block opacity-50 hover:opacity-100 p-0 px-6 mb-2 cursor-pointer transition-all duration-500 ease-in-out"><!----> 
            Mongoose
          </a></li><li class="dropdown-subitem"><a href="/tutorials/objection.html" class="link internal block opacity-50 hover:opacity-100 p-0 px-6 mb-2 cursor-pointer transition-all duration-500 ease-in-out"><!----> 
            Objection.js
          </a></li><li class="dropdown-subitem"><a href="/tutorials/graphql.html" class="link internal block opacity-50 hover:opacity-100 p-0 px-6 mb-2 cursor-pointer transition-all duration-500 ease-in-out"><!----> 
            GraphQL
          </a></li><li class="dropdown-subitem"><a href="/tutorials/socket-io.html" class="link internal block opacity-50 hover:opacity-100 p-0 px-6 mb-2 cursor-pointer transition-all duration-500 ease-in-out"><!----> 
            Socket.io
          </a></li><li class="dropdown-subitem"><a href="/tutorials/swagger.html" class="link internal block opacity-50 hover:opacity-100 p-0 px-6 mb-2 cursor-pointer transition-all duration-500 ease-in-out"><!----> 
            Swagger
          </a></li></ul></li><li class="mt-3"><h4 class="p-0 px-4 m-1 mb-2 text-md">Extra</h4> <ul class="dropdown-subitem-wrapper text-sm"><li class="dropdown-subitem"><a href="http://cli.tsed.io" target="_blank" rel="noopener noreferrer" class="link external block opacity-50 hover:opacity-100 p-0 px-6 mb-2 cursor-pointer transition-all duration-500 ease-in-out">
            CLI
           <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="http://logger.tsed.io" target="_blank" rel="noopener noreferrer" class="link external block opacity-50 hover:opacity-100 p-0 px-6 mb-2 cursor-pointer transition-all duration-500 ease-in-out">
            Logger
           <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="/api.html" class="link internal block opacity-50 hover:opacity-100 p-0 px-6 mb-2 cursor-pointer transition-all duration-500 ease-in-out"><!----> 
            Api reference
          </a></li><li class="dropdown-subitem"><a href="/contributing.html" class="link internal block opacity-50 hover:opacity-100 p-0 px-6 mb-2 cursor-pointer transition-all duration-500 ease-in-out"><!----> 
            Contributes
          </a></li><li class="dropdown-subitem"><a href="/tutorials/licence.html" class="link internal block opacity-50 hover:opacity-100 p-0 px-6 mb-2 cursor-pointer transition-all duration-500 ease-in-out"><!----> 
            License
          </a></li></ul></li></ul></div></div></li></ul></nav></div> <div class="flex h-full"><nav class="hidden sm:flex"><ul class="flex items-center h-full text-gray-dark"><li class="mx-1 content-wrapper"><div class="dropdown-wrapper relative flex items-center h-full px-3 py-4 -hover"><div class="flex items-center h-full w-full"><a class="flex items-center hover:text-gray-darker cursor-pointer transition-all duration-500 ease-in-out"><span>v6.11.4</span> <i class="bx bx-chevron-down"></i></a></div> <div class="nav-dropdown absolute text-gray-darker z-2"> <ul class="reset-list text-gray-darker"><li><!----> <a href="http://v4.tsed.io" target="_blank" rel="noopener noreferrer" class="link external flex items-center justify-center text-sm block opacity-75 hover:opacity-100 p-0 px-6 mt-1 mb-2 cursor-pointer transition-all"><span class="flex-1">v4 (obsolete)</span> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="mt-3"><!----> <a href="http://v5.tsed.io" target="_blank" rel="noopener noreferrer" class="link external flex items-center justify-center text-sm block opacity-75 hover:opacity-100 p-0 px-6 mt-1 mb-2 cursor-pointer transition-all"><span class="flex-1">v5 (maintenance)</span> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div></li></ul></nav></div> <div class="flex items-center h-full"><a title="Github" href="https://github.com/TypedProject/tsed" target="_blank" rel="noopener noreferrer" class="p-1 hover:text-blue-active transition-all duration-500 ease-in-out flex align-center justify-center lg:text-lg py-4"><i class="bx bxl-github"></i></a><a title="Gitter" href="https://gitter.im/Tsed-io/community" target="_blank" rel="noopener noreferrer" class="p-1 hover:text-blue-active transition-all duration-500 ease-in-out flex align-center justify-center lg:text-lg py-4"><i class="bx bx-message-rounded-dots"></i></a><a title="Twitter" href="https://twitter.com/TsED_io" target="_blank" rel="noopener noreferrer" class="p-1 hover:text-blue-active transition-all duration-500 ease-in-out flex align-center justify-center lg:text-lg py-4"><i class="bx bxl-twitter"></i></a><a title="StackOverflow" href="https://stackoverflow.com/search?q=tsed" target="_blank" rel="noopener noreferrer" class="p-1 hover:text-blue-active transition-all duration-500 ease-in-out flex align-center justify-center lg:text-lg py-4"><i class="bx bxl-stack-overflow"></i></a><a title="Sponsor" href="https://tsed.io/support.html" target="_blank" rel="noopener noreferrer" class="p-1 hover:text-blue-active transition-all duration-500 ease-in-out flex align-center justify-center lg:text-lg py-4"><i class="bx bxs-heart"></i></a></div> <div class="flex items-center h-full"><div id="docsearch"></div></div></header> <div class="sidebar-mask"></div> <main class="main-content relative z-2 pt-16"><div><div><div class="relative"><div class="page-header"><div class="bg-gray-lighter z-5 relative"><div class="page-header-container px-5 md:px-10 max-w-site m-auto flex items-center"><div class="flex-1"><div class="transition-all text-xl font-bold md:font-normal md:text-4xl">
          Passport.js
        </div></div> <ul class="flex items-center justify-center text-md -ml-2"><li title="Share"><!----></li> <!----> <li title="View Code Github" class="p-2"><a target="_blank" href="https://github.com/TypedProject/tsed/blob/production/docs/tutorials/passport.md" class="hover:text-blue-active"><i class="bx bx-code-alt"></i></a></li> <li title="Edit Page" class="p-2"><a target="_blank" href="https://github.com/TypedProject/tsed/edit/production/docs/tutorials/passport.md" class="hover:text-blue-active"><i class="bx bx-edit"></i></a></li> <li title="Report a Bug" class="p-2 last:pr-0"><a target="_blank" href="https://github.com/TypedProject/tsed/issues/new?title=%5BBUG%5D%20Page%20Passport.js%20-%20%2Ftutorials%2Fpassport" class="hover:text-blue-active"><i class="bx bx-bug"></i></a></li></ul></div></div></div></div> <div class="px-5 md:px-10 max-w-site m-auto"><div class="page-content"><article> <div class="content__default"><h1 id="passport-js"><a href="#passport-js" class="header-anchor">#</a> Passport.js</h1> <div class="flex justify-center items-center --darken"><a href="http://www.passportjs.org/" class="block m-auto p-5 rounded-full bg-" style="width:128px;height:128px;"><div class="h-full w-full bg-contain bg-no-repeat bg-center" style="background-image:url(http://www.passportjs.org/images/logo.svg);"></div> <img src="http://www.passportjs.org/images/logo.svg" height="128" class="hidden"></a></div> <blockquote><p>Passport is an authentication middleware for Node.js.</p></blockquote> <p>Extremely flexible and modular, Passport can be unobtrusively dropped in to any Express-based web application.
A comprehensive set of strategies support authentication using a username and password, Facebook, Twitter, and more.</p> <div type="examples" class="bg-gray-lighter rounded-small my-5  p-5"><div class="-m-3"><ul class="reset-list flex flex-wrap items-center"><li class="p-3"><a href="https://github.com/TypedProject/tsed-example-passportjs" title="Kit Passport.js" target="_blank" rel="noopener noreferrer" class="link external reset-link transition-all duration-500 ease-in-out relative flex flex-col no-underline hover:scale-110 text-xxs text-blue hover:text-blue-active"><span class="flex items-center justify-center relative z-2 overflow-hidden rounded-medium mb-2 bg-white shadow-undefined p-undefined" style="width:65px;height:65px;"><img src="/passportjs.png" class="w-full"></span> <!----> <span class="flex items-center justify-center whitespace-pre font-undefined" style="width:65px;">Kit Passport...</span> <!----></a></li><li class="p-3"><a href="https://github.com/TypedProject/tsed-example-typeorm" title="Kit TypeORM" target="_blank" rel="noopener noreferrer" class="link external reset-link transition-all duration-500 ease-in-out relative flex flex-col no-underline hover:scale-110 text-xxs text-blue hover:text-blue-active"><span class="flex items-center justify-center relative z-2 overflow-hidden rounded-medium mb-2 bg-white shadow-undefined p-undefined" style="width:65px;height:65px;"><img src="/typeorm.png" class="w-full"></span> <!----> <span class="flex items-center justify-center whitespace-pre font-undefined" style="width:65px;">Kit TypeORM</span> <!----></a></li><li class="p-3"><a href="https://github.com/TypedProject/tsed-example-passport-azure-ad" title="Kit Azure AD" target="_blank" rel="noopener noreferrer" class="link external reset-link transition-all duration-500 ease-in-out relative flex flex-col no-underline hover:scale-110 text-xxs text-blue hover:text-blue-active"><span class="flex items-center justify-center relative z-2 overflow-hidden rounded-medium mb-2 bg-white shadow-undefined p-undefined" style="width:65px;height:65px;"><img src="/azure.png" class="w-full"></span> <!----> <span class="flex items-center justify-center whitespace-pre font-undefined" style="width:65px;">Kit Azure AD</span> <!----></a></li></ul></div></div> <h2 id="installation"><a href="#installation" class="header-anchor">#</a> Installation</h2> <p>Before using Passport, we need to install the <a href="https://www.npmjs.com/package/passport" target="_blank" rel="noopener noreferrer">Passport.js<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> and the Passport-local.</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> --save passport
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="configure-your-server"><a href="#configure-your-server" class="header-anchor">#</a> Configure your server</h2> <p>Add this configuration to your server:</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>Configuration<span class="token punctuation">,</span> Inject<span class="token punctuation">,</span> PlatformApplication<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@tsed/common&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&quot;@tsed/passport&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&quot;@tsed/platform-express&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> bodyParser <span class="token keyword">from</span> <span class="token string">&quot;body-parser&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> cookieParser <span class="token keyword">from</span> <span class="token string">&quot;cookie-parser&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> session <span class="token keyword">from</span> <span class="token string">&quot;express-session&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> methodOverride <span class="token keyword">from</span> <span class="token string">&quot;method-override&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> rootDir <span class="token operator">=</span> __dirname<span class="token punctuation">;</span>

@<span class="token function">Configuration</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  componentsScan<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>rootDir<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/protocols/*{.ts,.js}</span><span class="token template-punctuation string">`</span></span> <span class="token comment">// scan protocols directory</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  passport<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Server</span> <span class="token punctuation">{</span>
  @<span class="token function">Inject</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  app<span class="token operator">:</span> PlatformApplication<span class="token punctuation">;</span>

  <span class="token function">$beforeRoutesInit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>app
      <span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">cookieParser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">methodOverride</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>bodyParser<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>bodyParser<span class="token punctuation">.</span><span class="token function">urlencoded</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        extended<span class="token operator">:</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token comment">// @ts-ignore</span>
      <span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">session</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        secret<span class="token operator">:</span> <span class="token string">&quot;mysecretkey&quot;</span><span class="token punctuation">,</span>
        resave<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        saveUninitialized<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token comment">// maxAge: 36000,</span>
        cookie<span class="token operator">:</span> <span class="token punctuation">{</span>
          path<span class="token operator">:</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span>
          httpOnly<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          secure<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
          maxAge<span class="token operator">:</span> <span class="token keyword">null</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br></div></div><h2 id="create-a-new-protocol"><a href="#create-a-new-protocol" class="header-anchor">#</a> Create a new Protocol</h2> <p>A Protocol is a special Ts.ED service which is used to declare a Passport Strategy and handle Passport lifecycle.</p> <p>Here is an example with the PassportLocal:</p> <div class="tabs -code -position-top text-gray-darker"><div class="tabs__header bg-gray-lighter-active"><ul class="reset-list tabs__header--ul -center"></ul></div> <div class="tabs__body  bg-gray-lighter"><!----> <!----></div></div> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>For signup and basic flow you can checkout one of our examples:</p> <div type="examples" class="bg-gray-lighter rounded-small my-5  p-5"><div class="-m-3"><ul class="reset-list flex flex-wrap items-center"><li class="p-3"><a href="https://github.com/TypedProject/tsed-example-passportjs" title="Kit Passport.js" target="_blank" rel="noopener noreferrer" class="link external reset-link transition-all duration-500 ease-in-out relative flex flex-col no-underline hover:scale-110 text-xxs text-blue hover:text-blue-active"><span class="flex items-center justify-center relative z-2 overflow-hidden rounded-medium mb-2 bg-white shadow-undefined p-undefined" style="width:65px;height:65px;"><img src="/passportjs.png" class="w-full"></span> <!----> <span class="flex items-center justify-center whitespace-pre font-undefined" style="width:65px;">Kit Passport...</span> <!----></a></li><li class="p-3"><a href="https://github.com/TypedProject/tsed-example-typeorm" title="Kit TypeORM" target="_blank" rel="noopener noreferrer" class="link external reset-link transition-all duration-500 ease-in-out relative flex flex-col no-underline hover:scale-110 text-xxs text-blue hover:text-blue-active"><span class="flex items-center justify-center relative z-2 overflow-hidden rounded-medium mb-2 bg-white shadow-undefined p-undefined" style="width:65px;height:65px;"><img src="/typeorm.png" class="w-full"></span> <!----> <span class="flex items-center justify-center whitespace-pre font-undefined" style="width:65px;">Kit TypeORM</span> <!----></a></li><li class="p-3"><a href="https://github.com/TypedProject/tsed-example-passport-azure-ad" title="Kit Azure AD" target="_blank" rel="noopener noreferrer" class="link external reset-link transition-all duration-500 ease-in-out relative flex flex-col no-underline hover:scale-110 text-xxs text-blue hover:text-blue-active"><span class="flex items-center justify-center relative z-2 overflow-hidden rounded-medium mb-2 bg-white shadow-undefined p-undefined" style="width:65px;height:65px;"><img src="/azure.png" class="w-full"></span> <!----> <span class="flex items-center justify-center whitespace-pre font-undefined" style="width:65px;">Kit Azure AD</span> <!----></a></li></ul></div></div></div> <h2 id="create-the-passport-controller"><a href="#create-the-passport-controller" class="header-anchor">#</a> Create the Passport controller</h2> <p>Create a new Passport controller as following:</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>BodyParams<span class="token punctuation">,</span> Controller<span class="token punctuation">,</span> Post<span class="token punctuation">,</span> ProviderScope<span class="token punctuation">,</span> Req<span class="token punctuation">,</span> Scope<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@tsed/common&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>Authenticate<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@tsed/passport&quot;</span><span class="token punctuation">;</span>

@<span class="token function">Controller</span><span class="token punctuation">(</span><span class="token string">&quot;/auth&quot;</span><span class="token punctuation">)</span>
@<span class="token function">Scope</span><span class="token punctuation">(</span>ProviderScope<span class="token punctuation">.</span><span class="token constant">SINGLETON</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">AuthCtrl</span> <span class="token punctuation">{</span>
  @<span class="token function">Post</span><span class="token punctuation">(</span><span class="token string">&quot;/login&quot;</span><span class="token punctuation">)</span>
  @<span class="token function">Authenticate</span><span class="token punctuation">(</span><span class="token string">&quot;login&quot;</span><span class="token punctuation">)</span>
  <span class="token function">login</span><span class="token punctuation">(</span>@<span class="token function">Req</span><span class="token punctuation">(</span><span class="token punctuation">)</span> req<span class="token operator">:</span> Req<span class="token punctuation">,</span> @<span class="token function">BodyParams</span><span class="token punctuation">(</span><span class="token string">&quot;email&quot;</span><span class="token punctuation">)</span> email<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> @<span class="token function">BodyParams</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">)</span> password<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// FACADE</span>
    <span class="token keyword">return</span> req<span class="token punctuation">.</span>user<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>This controller will provide all required endpoints that will be used by the different protocols.</p> <h2 id="protect-a-route"><a href="#protect-a-route" class="header-anchor">#</a> Protect a route</h2> <p><a href="/api/exceptions/clientErrors/Unauthorized.html" title="Unauthorized" class="reset-link symbol-container -bubble "><span><span class="symbol class"></span></span> <span class="overflow-hidden truncate ">
    Unauthorized
  </span></a> and <a href="/api/passport/decorators/AuthenticateOptions.html" title="AuthenticateOptions" class="reset-link symbol-container -bubble "><span><span class="symbol interface"></span></span> <span class="overflow-hidden truncate ">
    AuthenticateOptions
  </span></a> decorators can be used as a Guard to protect your routes.</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>Controller<span class="token punctuation">,</span> Get<span class="token punctuation">,</span> QueryParams<span class="token punctuation">,</span> Inject<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@tsed/common&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>Authorize<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@tsed/passport&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>Calendar<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../models/Calendar&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>CalendarsService<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../service/CalendarsService&quot;</span><span class="token punctuation">;</span>

@<span class="token function">Controller</span><span class="token punctuation">(</span><span class="token string">&quot;/calendars&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">CalendarController</span> <span class="token punctuation">{</span>
  @<span class="token function">Inject</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">private</span> calendarsService<span class="token operator">:</span> CalendarsService<span class="token punctuation">;</span>

  @<span class="token function">Get</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span>
  @<span class="token function">Authorize</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">async</span> <span class="token function">getAll</span><span class="token punctuation">(</span>
    @<span class="token function">QueryParams</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> id<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
    @<span class="token function">QueryParams</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span> name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
    @<span class="token function">QueryParams</span><span class="token punctuation">(</span><span class="token string">&quot;owner&quot;</span><span class="token punctuation">)</span> owner<span class="token operator">:</span> <span class="token builtin">string</span>
  <span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>Calendar<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>calendarsService<span class="token punctuation">.</span><span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">{</span>_id<span class="token operator">:</span> id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> owner<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h2 id="basic-auth"><a href="#basic-auth" class="header-anchor">#</a> Basic Auth</h2> <p>It is also possible to use the Basic Auth. To do that, you have to create a Protocol based on <code>passport-http</code> strategy.</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>Req<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@tsed/common&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>Arg<span class="token punctuation">,</span> OnInstall<span class="token punctuation">,</span> OnVerify<span class="token punctuation">,</span> Protocol<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@tsed/passport&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>Strategy<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;passport&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>BasicStrategy<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;passport-http&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>UsersService<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../services/users/UsersService&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>checkEmail<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../utils/checkEmail&quot;</span><span class="token punctuation">;</span>

@<span class="token function">Protocol</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">&quot;basic&quot;</span><span class="token punctuation">,</span>
  useStrategy<span class="token operator">:</span> BasicStrategy<span class="token punctuation">,</span>
  settings<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">BasicProtocol</span> <span class="token keyword">implements</span> <span class="token class-name">OnVerify</span><span class="token punctuation">,</span> OnInstall <span class="token punctuation">{</span>
  <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token keyword">private</span> usersService<span class="token operator">:</span> UsersService<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">async</span> <span class="token function">$onVerify</span><span class="token punctuation">(</span>@<span class="token function">Req</span><span class="token punctuation">(</span><span class="token punctuation">)</span> request<span class="token operator">:</span> Req<span class="token punctuation">,</span> @<span class="token function">Arg</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> username<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> @<span class="token function">Arg</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> password<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">checkEmail</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>usersService<span class="token punctuation">.</span><span class="token function">findOne</span><span class="token punctuation">(</span><span class="token punctuation">{</span>email<span class="token operator">:</span> username<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>user<span class="token punctuation">.</span><span class="token function">verifyPassword</span><span class="token punctuation">(</span>password<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> user<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">$onInstall</span><span class="token punctuation">(</span>strategy<span class="token operator">:</span> Strategy<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
    <span class="token comment">// intercept the strategy instance to adding extra configuration</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><p>Then, add the protocol name on the <a href="/api/exceptions/clientErrors/Unauthorized.html" title="Unauthorized" class="reset-link symbol-container -bubble "><span><span class="symbol class"></span></span> <span class="overflow-hidden truncate ">
    Unauthorized
  </span></a> decorator:</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>Controller<span class="token punctuation">,</span> Get<span class="token punctuation">,</span> Inject<span class="token punctuation">,</span> QueryParams<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@tsed/common&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>Authorize<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@tsed/passport&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>Calendar<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../models/Calendar&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>CalendarsService<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../service/CalendarsService&quot;</span><span class="token punctuation">;</span>

@<span class="token function">Controller</span><span class="token punctuation">(</span><span class="token string">&quot;/calendars&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">CalendarController</span> <span class="token punctuation">{</span>
  @<span class="token function">Inject</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">private</span> calendarsService<span class="token operator">:</span> CalendarsService<span class="token punctuation">;</span>

  @<span class="token function">Get</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span>
  @<span class="token function">Authorize</span><span class="token punctuation">(</span><span class="token string">&quot;basic&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">async</span> <span class="token function">getAll</span><span class="token punctuation">(</span>
    @<span class="token function">QueryParams</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> id<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
    @<span class="token function">QueryParams</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span> name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
    @<span class="token function">QueryParams</span><span class="token punctuation">(</span><span class="token string">&quot;owner&quot;</span><span class="token punctuation">)</span> owner<span class="token operator">:</span> <span class="token builtin">string</span>
  <span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>Calendar<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>calendarsService<span class="token punctuation">.</span><span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">{</span>_id<span class="token operator">:</span> id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> owner<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h2 id="advanced-auth"><a href="#advanced-auth" class="header-anchor">#</a> Advanced Auth</h2> <h3 id="jwt"><a href="#jwt" class="header-anchor">#</a> JWT</h3> <p>JWT auth scenario, for example, is different. The Strategy will produce a payload which contains data and JWT token. This information
isn't attached to the request and cannot be retrieved using the default Ts.ED decorator.</p> <p>To solve it, the <code>@tsed/passport</code> has two decorators <a href="/api/core/utils/decorators/decoratorArgs.html" title="decoratorArgs" class="reset-link symbol-container -bubble "><span><span class="symbol decorator"></span></span> <span class="overflow-hidden truncate ">
    decoratorArgs
  </span></a> and <a href="/api/core/utils/decorators/decoratorArgs.html" title="decoratorArgs" class="reset-link symbol-container -bubble "><span><span class="symbol decorator"></span></span> <span class="overflow-hidden truncate ">
    decoratorArgs
  </span></a> to get the argument given to the original verify function by the Strategy.</p> <p>For example, the official <code>passport-jwt</code> documentation gives this javascript code to configure the strategy:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span>JwtStrategy<span class="token punctuation">,</span> ExtractJwt<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;passport-jwt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> opts <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

opts<span class="token punctuation">.</span>jwtFromRequest <span class="token operator">=</span> ExtractJwt<span class="token punctuation">.</span><span class="token function">fromAuthHeaderAsBearerToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
opts<span class="token punctuation">.</span>secretOrKey <span class="token operator">=</span> <span class="token string">&quot;secret&quot;</span><span class="token punctuation">;</span>
opts<span class="token punctuation">.</span>issuer <span class="token operator">=</span> <span class="token string">&quot;accounts.examplesoft.com&quot;</span><span class="token punctuation">;</span>
opts<span class="token punctuation">.</span>audience <span class="token operator">=</span> <span class="token string">&quot;yoursite.net&quot;</span><span class="token punctuation">;</span>

passport<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">JwtStrategy</span><span class="token punctuation">(</span>opts<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">jwt_payload<span class="token punctuation">,</span> done</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  authService<span class="token punctuation">.</span><span class="token function">findOne</span><span class="token punctuation">(</span><span class="token punctuation">{</span>id<span class="token operator">:</span> jwt_payload<span class="token punctuation">.</span>sub<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> user</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token function">done</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token function">done</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token function">done</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// or you could create a new account</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>The example code can be written with Ts.ED as following:</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>Req<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@tsed/common&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>Arg<span class="token punctuation">,</span> OnVerify<span class="token punctuation">,</span> Protocol<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@tsed/passport&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>ExtractJwt<span class="token punctuation">,</span> Strategy<span class="token punctuation">,</span> StrategyOptions<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;passport-jwt&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>AuthService<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../services/auth/AuthService&quot;</span><span class="token punctuation">;</span>

@<span class="token generic-function"><span class="token function">Protocol</span><span class="token generic class-name"><span class="token operator">&lt;</span>StrategyOptions<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">&quot;jwt&quot;</span><span class="token punctuation">,</span>
  useStrategy<span class="token operator">:</span> Strategy<span class="token punctuation">,</span>
  settings<span class="token operator">:</span> <span class="token punctuation">{</span>
    jwtFromRequest<span class="token operator">:</span> ExtractJwt<span class="token punctuation">.</span><span class="token function">fromAuthHeaderAsBearerToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    secretOrKey<span class="token operator">:</span> <span class="token string">&quot;secret&quot;</span><span class="token punctuation">,</span>
    issuer<span class="token operator">:</span> <span class="token string">&quot;accounts.examplesoft.com&quot;</span><span class="token punctuation">,</span>
    audience<span class="token operator">:</span> <span class="token string">&quot;yoursite.net&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">JwtProtocol</span> <span class="token keyword">implements</span> <span class="token class-name">OnVerify</span> <span class="token punctuation">{</span>
  <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token keyword">private</span> authService<span class="token operator">:</span> AuthService<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">async</span> <span class="token function">$onVerify</span><span class="token punctuation">(</span>@<span class="token function">Req</span><span class="token punctuation">(</span><span class="token punctuation">)</span> req<span class="token operator">:</span> Req<span class="token punctuation">,</span> @<span class="token function">Arg</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> jwtPayload<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>authService<span class="token punctuation">.</span><span class="token function">findOne</span><span class="token punctuation">(</span><span class="token punctuation">{</span>id<span class="token operator">:</span> jwtPayload<span class="token punctuation">.</span>sub<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> user <span class="token operator">?</span> user <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h3 id="azure-bearer-auth"><a href="#azure-bearer-auth" class="header-anchor">#</a> Azure Bearer Auth</h3> <p>Azure bearer uses another scenario which requires to return multiple arguments. The <code>$onVerify</code> method accepts an <code>Array</code> to return multiple values.</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>Context<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@tsed/common&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>Arg<span class="token punctuation">,</span> OnVerify<span class="token punctuation">,</span> PassportMiddleware<span class="token punctuation">,</span> Protocol<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@tsed/passport&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>BearerStrategy<span class="token punctuation">,</span> ITokenPayload<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;passport-azure-ad&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>AuthService<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../services/auth/AuthService&quot;</span><span class="token punctuation">;</span>

@<span class="token function">Protocol</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">&quot;azure-bearer&quot;</span><span class="token punctuation">,</span>
  useStrategy<span class="token operator">:</span> BearerStrategy
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">AzureBearerProtocol</span> <span class="token keyword">implements</span> <span class="token class-name">OnVerify</span> <span class="token punctuation">{</span>
  <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token keyword">private</span> authService<span class="token operator">:</span> AuthService<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span>

  <span class="token function">$onVerify</span><span class="token punctuation">(</span>@<span class="token function">Arg</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> token<span class="token operator">:</span> ITokenPayload<span class="token punctuation">,</span> @<span class="token function">Context</span><span class="token punctuation">(</span><span class="token punctuation">)</span> ctx<span class="token operator">:</span> Context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Verify is the right place to check given token and return UserInfo</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span>authService<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span>options <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token operator">=</span> ctx<span class="token punctuation">.</span>endpoint<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span>PassportMiddleware<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// retrieve options configured for the endpoint</span>
    <span class="token comment">// check precondition and authenticate user by their token and given options</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> user <span class="token operator">=</span> authService<span class="token punctuation">.</span><span class="token function">verify</span><span class="token punctuation">(</span>token<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        authService<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span>logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token punctuation">{</span>event<span class="token operator">:</span> <span class="token string">&quot;BearerStrategy - token: &quot;</span><span class="token punctuation">,</span> token<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> token<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      ctx<span class="token punctuation">.</span>logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token punctuation">{</span>event<span class="token operator">:</span> <span class="token string">&quot;BearerStrategy - user: &quot;</span><span class="token punctuation">,</span> token<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">return</span> <span class="token punctuation">[</span>user<span class="token punctuation">,</span> token<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      ctx<span class="token punctuation">.</span>logger<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token punctuation">{</span>event<span class="token operator">:</span> <span class="token string">&quot;BearerStrategy&quot;</span><span class="token punctuation">,</span> token<span class="token punctuation">,</span> error<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">throw</span> error<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><h3 id="discord-auth"><a href="#discord-auth" class="header-anchor">#</a> Discord Auth</h3> <p>Discord passport gives an example to refresh the token. To do that you have to create a new Strategy and register with the refresh function from <code>passport-oauth2-refresh</code> module.</p> <p>Here is the JavaScript code:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span>Strategy<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;passport-discord&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

passport
  <span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Strategy</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      clientID<span class="token operator">:</span> <span class="token string">&quot;id&quot;</span><span class="token punctuation">,</span>
      clientSecret<span class="token operator">:</span> <span class="token string">&quot;secret&quot;</span><span class="token punctuation">,</span>
      callbackURL<span class="token operator">:</span> <span class="token string">&quot;callbackURL&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token parameter">accessToken<span class="token punctuation">,</span> refreshToken<span class="token punctuation">,</span> profile<span class="token punctuation">,</span> cb</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      authService<span class="token punctuation">.</span><span class="token function">findOrCreate</span><span class="token punctuation">(</span><span class="token punctuation">{</span>discordId<span class="token operator">:</span> profile<span class="token punctuation">.</span>id<span class="token punctuation">}</span><span class="token punctuation">,</span> cb<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>Ts.ED provides a way to handle the strategy built by the <code>@tsed/passport</code> by using the <code>$onInstall</code> hook.</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>Req<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@tsed/common&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>Args<span class="token punctuation">,</span> OnInstall<span class="token punctuation">,</span> OnVerify<span class="token punctuation">,</span> Protocol<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@tsed/passport&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>Strategy<span class="token punctuation">,</span> StrategyOptions<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;passport-discord&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> refresh <span class="token keyword">from</span> <span class="token string">&quot;passport-oauth2-refresh&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>AuthService<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../services/auth/AuthService&quot;</span><span class="token punctuation">;</span>

@<span class="token generic-function"><span class="token function">Protocol</span><span class="token generic class-name"><span class="token operator">&lt;</span>StrategyOptions<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">&quot;discord&quot;</span><span class="token punctuation">,</span>
  useStrategy<span class="token operator">:</span> Strategy<span class="token punctuation">,</span>
  settings<span class="token operator">:</span> <span class="token punctuation">{</span>
    clientID<span class="token operator">:</span> <span class="token string">&quot;id&quot;</span><span class="token punctuation">,</span>
    clientSecret<span class="token operator">:</span> <span class="token string">&quot;secret&quot;</span><span class="token punctuation">,</span>
    callbackURL<span class="token operator">:</span> <span class="token string">&quot;callbackURL&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">DiscordProtocol</span> <span class="token keyword">implements</span> <span class="token class-name">OnVerify</span><span class="token punctuation">,</span> OnInstall <span class="token punctuation">{</span>
  <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token keyword">private</span> authService<span class="token operator">:</span> AuthService<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">async</span> <span class="token function">$onVerify</span><span class="token punctuation">(</span>@<span class="token function">Req</span><span class="token punctuation">(</span><span class="token punctuation">)</span> req<span class="token operator">:</span> Req<span class="token punctuation">,</span> @<span class="token function">Args</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">[</span>accessToken<span class="token punctuation">,</span> refreshToken<span class="token punctuation">,</span> profile<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    profile<span class="token punctuation">.</span>refreshToken <span class="token operator">=</span> refreshToken<span class="token punctuation">;</span>

    <span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>authService<span class="token punctuation">.</span><span class="token function">findOne</span><span class="token punctuation">(</span><span class="token punctuation">{</span>discordId<span class="token operator">:</span> profile<span class="token punctuation">.</span>id<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> user <span class="token operator">?</span> user <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">async</span> <span class="token function">$onInstall</span><span class="token punctuation">(</span>strategy<span class="token operator">:</span> Strategy<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    refresh<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>strategy<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><h3 id="facebook-auth"><a href="#facebook-auth" class="header-anchor">#</a> Facebook Auth</h3> <p>Facebook passport gives an example to use scope on routes (permissions). We'll see how we can configure a route with a mandatory <code>scope</code>.</p> <p>Here is the corresponding Facebook protocol:</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>Inject<span class="token punctuation">,</span> Req<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@tsed/common&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>Args<span class="token punctuation">,</span> OnInstall<span class="token punctuation">,</span> OnVerify<span class="token punctuation">,</span> Protocol<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@tsed/passport&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>Strategy<span class="token punctuation">,</span> StrategyOptions<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;passport-facebook&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>AuthService<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../services/auth/AuthService&quot;</span><span class="token punctuation">;</span>

@<span class="token generic-function"><span class="token function">Protocol</span><span class="token generic class-name"><span class="token operator">&lt;</span>StrategyOptions<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">&quot;facebook&quot;</span><span class="token punctuation">,</span>
  useStrategy<span class="token operator">:</span> Strategy<span class="token punctuation">,</span>
  settings<span class="token operator">:</span> <span class="token punctuation">{</span>
    clientID<span class="token operator">:</span> <span class="token string">&quot;FACEBOOK_APP_ID&quot;</span><span class="token punctuation">,</span>
    clientSecret<span class="token operator">:</span> <span class="token string">&quot;FACEBOOK_APP_SECRET&quot;</span><span class="token punctuation">,</span>
    callbackURL<span class="token operator">:</span> <span class="token string">&quot;http://www.example.com/auth/facebook/callback&quot;</span><span class="token punctuation">,</span>
    profileFields<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;emails&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">FacebookProtocol</span> <span class="token keyword">implements</span> <span class="token class-name">OnVerify</span><span class="token punctuation">,</span> OnInstall <span class="token punctuation">{</span>
  @<span class="token function">Inject</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">private</span> authService<span class="token operator">:</span> AuthService<span class="token punctuation">;</span>

  <span class="token keyword">async</span> <span class="token function">$onVerify</span><span class="token punctuation">(</span>@<span class="token function">Req</span><span class="token punctuation">(</span><span class="token punctuation">)</span> req<span class="token operator">:</span> Req<span class="token punctuation">,</span> @<span class="token function">Args</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">[</span>accessToken<span class="token punctuation">,</span> refreshToken<span class="token punctuation">,</span> profile<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    profile<span class="token punctuation">.</span>refreshToken <span class="token operator">=</span> refreshToken<span class="token punctuation">;</span>

    <span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>authService<span class="token punctuation">.</span><span class="token function">findOne</span><span class="token punctuation">(</span><span class="token punctuation">{</span>facebookId<span class="token operator">:</span> profile<span class="token punctuation">.</span>id<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> user <span class="token operator">?</span> user <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">Note</p> <p>In order to use Facebook authentication, you must first create an app at Facebook Developers. When created, an app is assigned an App ID and an App Secret. Your application must also implement a redirect URL, to which Facebook will redirect users after they have approved access for your application.</p> <p>The verify callback for Facebook authentication accepts <code>accessToken</code>, <code>refreshToken</code>, and <code>profile</code> arguments. <code>profile</code> will contain user profile information provided by Facebook; refer to User <a href="http://www.passportjs.org/guide/profile/" target="_blank" rel="noopener noreferrer">Profile<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> for additional information.</p></div> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>For security reasons, the redirection URL must reside on the same host that is registered with Facebook.</p></div> <p>Then we have to implement routes as following:</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>Controller<span class="token punctuation">,</span> Get<span class="token punctuation">,</span> Req<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@tsed/common&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>Authenticate<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@tsed/passport&quot;</span><span class="token punctuation">;</span>

@<span class="token function">Controller</span><span class="token punctuation">(</span><span class="token string">&quot;/auth&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">AuthCtrl</span> <span class="token punctuation">{</span>
  @<span class="token function">Get</span><span class="token punctuation">(</span><span class="token string">&quot;/:provider&quot;</span><span class="token punctuation">)</span>
  @<span class="token function">Authenticate</span><span class="token punctuation">(</span><span class="token string">&quot;facebook&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>scope<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;email&quot;</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token function">authenticated</span><span class="token punctuation">(</span>@<span class="token function">Req</span><span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">)</span> user<span class="token operator">:</span> Req<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Facade</span>
    <span class="token keyword">return</span> user<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  @<span class="token function">Get</span><span class="token punctuation">(</span><span class="token string">&quot;/:provider/callback&quot;</span><span class="token punctuation">)</span>
  @<span class="token function">Authenticate</span><span class="token punctuation">(</span><span class="token string">&quot;facebook&quot;</span><span class="token punctuation">)</span>
  <span class="token function">callback</span><span class="token punctuation">(</span>@<span class="token function">Req</span><span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">)</span> user<span class="token operator">:</span> Req<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Facade</span>
    <span class="token keyword">return</span> user<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">Note</p> <p><a href="/api/passport/decorators/AuthenticateOptions.html" title="AuthenticateOptions" class="reset-link symbol-container -bubble "><span><span class="symbol interface"></span></span> <span class="overflow-hidden truncate ">
    AuthenticateOptions
  </span></a> decorator accepts a second option to configure the <code>scope</code>. It is equivalent to <code>passport.authenticate('facebook', {scope: 'read_stream' })</code></p></div> <h2 id="roles"><a href="#roles" class="header-anchor">#</a> Roles</h2> <p>Roles access management isn't a part of Passport.js and Ts.ED doesn't provide a way to handle this because it is specific for each application.</p> <p>This section will give basic examples to implement your own roles strategy access.</p> <p>To begin we have to implement a middleware which will be responsible to check the user role:</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>EndpointInfo<span class="token punctuation">,</span> Middleware<span class="token punctuation">,</span> Req<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@tsed/common&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>Unauthorized<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@tsed/exceptions&quot;</span><span class="token punctuation">;</span>

@<span class="token function">Middleware</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">AcceptRolesMiddleware</span> <span class="token punctuation">{</span>
  <span class="token function">use</span><span class="token punctuation">(</span>@<span class="token function">Req</span><span class="token punctuation">(</span><span class="token punctuation">)</span> request<span class="token operator">:</span> Req<span class="token punctuation">,</span> @<span class="token function">EndpointInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> endpoint<span class="token operator">:</span> EndpointInfo<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>request<span class="token punctuation">.</span>user <span class="token operator">&amp;&amp;</span> request<span class="token punctuation">.</span><span class="token function">isAuthenticated</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> roles <span class="token operator">=</span> endpoint<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span>AcceptRolesMiddleware<span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>roles<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>user<span class="token punctuation">.</span>role<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Unauthorized</span><span class="token punctuation">(</span><span class="token string">&quot;Insufficient role&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>Then, we have to create a decorator <code>AcceptRoles</code>. This decorator will store the given roles and register the AcceptRolesMiddleware created before.</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>UseBefore<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@tsed/common/src&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>applyDecorators<span class="token punctuation">,</span> StoreSet<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@tsed/core&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>AcceptRolesMiddleware<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./AcceptRolesMiddleware&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">AcceptRoles</span><span class="token punctuation">(</span><span class="token operator">...</span>roles<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">applyDecorators</span><span class="token punctuation">(</span>
    <span class="token function">UseBefore</span><span class="token punctuation">(</span>AcceptRolesMiddleware<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">StoreSet</span><span class="token punctuation">(</span>AcceptRolesMiddleware<span class="token punctuation">,</span> roles<span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>Finally, we can use this decorator on an Endpoint like this:</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>Controller<span class="token punctuation">,</span> Post<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@tsed/common&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>Authorize<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@tsed/passport&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>AcceptRoles<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../decorators/acceptRoles&quot;</span><span class="token punctuation">;</span>

@<span class="token function">Controller</span><span class="token punctuation">(</span><span class="token string">&quot;/calendars&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">CalendarController</span> <span class="token punctuation">{</span>
  @<span class="token function">Post</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span>
  @<span class="token function">Authorize</span><span class="token punctuation">(</span><span class="token string">&quot;local&quot;</span><span class="token punctuation">)</span>
  @<span class="token function">AcceptRoles</span><span class="token punctuation">(</span><span class="token string">&quot;admin&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">async</span> <span class="token function">post</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="decorators"><a href="#decorators" class="header-anchor">#</a> Decorators</h2> <div class="bg-gray-lighter pb-4 p-5 mb-10 rounded-small"><div class="-mx-2"><ul class="reset-list flex flex-wrap"><li class="w-full sm:w-1/3 lg:w-1/4 mb-2 px-2"><a href="/api/passport/decorators/Args.html" title="Args" class="w-full px-2 py-1 reset-link symbol-container -list "><span><span class="symbol decorator"></span></span> <span class="overflow-hidden truncate ">
    Args
  </span></a></li><li class="w-full sm:w-1/3 lg:w-1/4 mb-2 px-2"><a href="/api/passport/decorators/Arg.html" title="Arg" class="w-full px-2 py-1 reset-link symbol-container -list "><span><span class="symbol decorator"></span></span> <span class="overflow-hidden truncate ">
    Arg
  </span></a></li><li class="w-full sm:w-1/3 lg:w-1/4 mb-2 px-2"><a href="/api/passport/decorators/Authenticate.html" title="Authenticate" class="w-full px-2 py-1 reset-link symbol-container -list "><span><span class="symbol decorator"></span></span> <span class="overflow-hidden truncate ">
    Authenticate
  </span></a></li><li class="w-full sm:w-1/3 lg:w-1/4 mb-2 px-2"><a href="/api/passport/decorators/Authorize.html" title="Authorize" class="w-full px-2 py-1 reset-link symbol-container -list "><span><span class="symbol decorator"></span></span> <span class="overflow-hidden truncate ">
    Authorize
  </span></a></li><li class="w-full sm:w-1/3 lg:w-1/4 mb-2 px-2"><a href="/api/passport/decorators/Protocol.html" title="Protocol" class="w-full px-2 py-1 reset-link symbol-container -list "><span><span class="symbol decorator"></span></span> <span class="overflow-hidden truncate ">
    Protocol
  </span></a></li></ul></div></div> <h2 id="author"><a href="#author" class="header-anchor">#</a> Author</h2> <div class="-m-2 mb-5"><ul class="reset-list flex flex-wrap items-center"></ul></div> <h2 id="maintainers"><a href="#maintainers" class="header-anchor">#</a> Maintainers <span class="inline-block rounded-small px-2 text-white text-sm normal-case bg-emerald" style="vertical-align:top;">Help wanted</span></h2> <div class="-m-2 mb-5"><ul class="reset-list flex flex-wrap items-center"></ul></div> <div class="flex items-center justify-center p-5"><div class="rounded-medium inline-flex flex-col items-stretch overflow-hidden text-base transition-colors
  bg-blue border-blue text-white-button focus:bg-blue-active focus:border-blue-active
  hover:bg-blue-active hover:border-blue-active focus:text-white-button-active hover:text-white-button-active
   cursor-pointer border-1 border-solid rounded-small shadow-none"><a href="/contributing.html" title="" class="link internal reset-link flex justify-center items-center w-full font-bold px-4 py-1"><!----> <span class="m-1 text-center flex justify-center items-center">
 Become maintainer
</span></a></div></div></div> </article> <div class="pt-5"><div class="py-5 flex justify-end text-sm"><p><span class="font-bold pr-1">Last Updated:</span> <span class="time">11/28/2020, 9:55:39 AM</span></p></div> <div class="page-nav pt-5 mb-10"><div class="flex align-center justify-between overflow-hidden"><span class="flex align-center justify-center"><a href="/docs/testing.html" class="p-2 pr-3 transition duration-500 ease-in-out hover:bg-white-active rounded-small hover:text-white text-md font-medium flex items-center justify-between"><i class="bx bx-chevron-left"></i> <span>
            Testing
          </span></a></span> <span class="flex align-center justify-center"><a href="/tutorials/typeorm.html" class="p-2 pl-3 transition duration-500 ease-in-out hover:bg-white-active rounded-small hover:text-white text-md font-medium flex items-center justify-between"><span>
            TypeORM
          </span> <i class="bx bx-chevron-right"></i></a></span></div></div></div> <section slot="page-bottom" class="other-topics px-3"><h4 class="text-xl mb-4 mt-2 font-semibold">
            Other topics
          </h4> <ul class="flex justify-start flex-wrap -mx-1"><li class="p-1"><a href="/tutorials/session.html" class="text-xs no-underline py-1 px-2 bg-gray-lighter rounded-small hover:bg-blue hover:text-white">Session &amp; cookies
      </a></li><li class="p-1"><a href="/tutorials/passport.html" aria-current="page" class="text-xs no-underline py-1 px-2 bg-gray-lighter rounded-small hover:bg-blue hover:text-white router-link-exact-active router-link-active">Passport.js
      </a></li><li class="p-1"><a href="/tutorials/typeorm.html" class="text-xs no-underline py-1 px-2 bg-gray-lighter rounded-small hover:bg-blue hover:text-white">TypeORM
      </a></li><li class="p-1"><a href="/tutorials/mongoose.html" class="text-xs no-underline py-1 px-2 bg-gray-lighter rounded-small hover:bg-blue hover:text-white">Mongoose
      </a></li><li class="p-1"><a href="/tutorials/graphql.html" class="text-xs no-underline py-1 px-2 bg-gray-lighter rounded-small hover:bg-blue hover:text-white">GraphQL
      </a></li><li class="p-1"><a href="/tutorials/socket-io.html" class="text-xs no-underline py-1 px-2 bg-gray-lighter rounded-small hover:bg-blue hover:text-white">Socket.io
      </a></li><li class="p-1"><a href="/tutorials/swagger.html" class="text-xs no-underline py-1 px-2 bg-gray-lighter rounded-small hover:bg-blue hover:text-white">Swagger
      </a></li><li class="p-1"><a href="/tutorials/ajv.html" class="text-xs no-underline py-1 px-2 bg-gray-lighter rounded-small hover:bg-blue hover:text-white">AJV
      </a></li><li class="p-1"><a href="/tutorials/multer.html" class="text-xs no-underline py-1 px-2 bg-gray-lighter rounded-small hover:bg-blue hover:text-white">Multer
      </a></li><li class="p-1"><a href="/tutorials/serve-static-files.html" class="text-xs no-underline py-1 px-2 bg-gray-lighter rounded-small hover:bg-blue hover:text-white">Serve static files
      </a></li><li class="p-1"><a href="/tutorials/templating.html" class="text-xs no-underline py-1 px-2 bg-gray-lighter rounded-small hover:bg-blue hover:text-white">Templating
      </a></li><li class="p-1"><a href="/tutorials/throw-http-exceptions.html" class="text-xs no-underline py-1 px-2 bg-gray-lighter rounded-small hover:bg-blue hover:text-white">Throw HTTP Exceptions
      </a></li><li class="p-1"><a href="/tutorials/not-found-page.html" class="text-xs no-underline py-1 px-2 bg-gray-lighter rounded-small hover:bg-blue hover:text-white">Customize 404
      </a></li><li class="p-1"><a href="/tutorials/aws.html" class="text-xs no-underline py-1 px-2 bg-gray-lighter rounded-small hover:bg-blue hover:text-white">AWS
      </a></li><li class="p-1"><a href="/tutorials/seq.html" class="text-xs no-underline py-1 px-2 bg-gray-lighter rounded-small hover:bg-blue hover:text-white">Seq
      </a></li><li class="p-1"><a href="/docs/controllers.html" class="text-xs no-underline py-1 px-2 bg-gray-lighter rounded-small hover:bg-blue hover:text-white">Controllers
      </a></li><li class="p-1"><a href="/docs/providers.html" class="text-xs no-underline py-1 px-2 bg-gray-lighter rounded-small hover:bg-blue hover:text-white">Providers
      </a></li><li class="p-1"><a href="/docs/model.html" class="text-xs no-underline py-1 px-2 bg-gray-lighter rounded-small hover:bg-blue hover:text-white">Model
      </a></li><li class="p-1"><a href="/docs/converters.html" class="text-xs no-underline py-1 px-2 bg-gray-lighter rounded-small hover:bg-blue hover:text-white">JsonMapper
      </a></li><li class="p-1"><a href="/docs/middlewares.html" class="text-xs no-underline py-1 px-2 bg-gray-lighter rounded-small hover:bg-blue hover:text-white">Middlewares
      </a></li><li class="p-1"><a href="/docs/pipes.html" class="text-xs no-underline py-1 px-2 bg-gray-lighter rounded-small hover:bg-blue hover:text-white">Pipes
      </a></li><li class="p-1"><a href="/docs/interceptors.html" class="text-xs no-underline py-1 px-2 bg-gray-lighter rounded-small hover:bg-blue hover:text-white">Interceptors
      </a></li><li class="p-1"><a href="/docs/authentication.html" class="text-xs no-underline py-1 px-2 bg-gray-lighter rounded-small hover:bg-blue hover:text-white">Authentication
      </a></li><li class="p-1"><a href="/docs/hooks.html" class="text-xs no-underline py-1 px-2 bg-gray-lighter rounded-small hover:bg-blue hover:text-white">Hooks
      </a></li><li class="p-1"><a href="/docs/injection-scopes.html" class="text-xs no-underline py-1 px-2 bg-gray-lighter rounded-small hover:bg-blue hover:text-white">Injection scopes
      </a></li><li class="p-1"><a href="/docs/custom-providers.html" class="text-xs no-underline py-1 px-2 bg-gray-lighter rounded-small hover:bg-blue hover:text-white">Custom providers
      </a></li><li class="p-1"><a href="/docs/custom-endpoint-decorators.html" class="text-xs no-underline py-1 px-2 bg-gray-lighter rounded-small hover:bg-blue hover:text-white">Custom endpoint decorator
      </a></li><li class="p-1"><a href="/docs/testing.html" class="text-xs no-underline py-1 px-2 bg-gray-lighter rounded-small hover:bg-blue hover:text-white">Testing
      </a></li></ul> </section></div></div> <aside class="page-sidebar fixed"> <ul class="page-sidebar-sub-headers"><li class="page-sidebar-sub-header"><a href="/tutorials/passport.html#installation" class="page-sidebar-link ">Installation</a></li><li class="page-sidebar-sub-header"><a href="/tutorials/passport.html#configure-your-server" class="page-sidebar-link ">Configure your server</a></li><li class="page-sidebar-sub-header"><a href="/tutorials/passport.html#create-a-new-protocol" class="page-sidebar-link ">Create a new Protocol</a></li><li class="page-sidebar-sub-header"><a href="/tutorials/passport.html#create-the-passport-controller" class="page-sidebar-link ">Create the Passport controller</a></li><li class="page-sidebar-sub-header"><a href="/tutorials/passport.html#protect-a-route" class="page-sidebar-link ">Protect a route</a></li><li class="page-sidebar-sub-header"><a href="/tutorials/passport.html#basic-auth" class="page-sidebar-link ">Basic Auth</a></li><li class="page-sidebar-sub-header"><a href="/tutorials/passport.html#advanced-auth" class="page-sidebar-link ">Advanced Auth</a></li><li class="page-sidebar-sub-header"><a href="/tutorials/passport.html#roles" class="page-sidebar-link ">Roles</a></li><li class="page-sidebar-sub-header"><a href="/tutorials/passport.html#decorators" class="page-sidebar-link ">Decorators</a></li><li class="page-sidebar-sub-header"><a href="/tutorials/passport.html#author" class="page-sidebar-link ">Author</a></li><li class="page-sidebar-sub-header"><a href="/tutorials/passport.html#maintainers" class="page-sidebar-link ">Maintainers</a></li></ul> </aside></div></div></main> <aside class="sidebar -translate-x-100 md:shadow-sidebar md:translate-x-0"> <ul class="reset-list py-5"><li><div class="mb-2"><a href="/getting-started/" class="sidebar-link relative block py-2 font-bold text-gray-darker text-md px-5">Introduction</a></div></li><li><div class="sidebar-group mb-2 collapsable"><p class="cursor-pointer font-bold text-gray-darker flex items-center justify-center text-md pl-5 pr-2 py-1"><span class="flex-1">Getting started</span> <i class="bx bx-chevron-down text-xl transition-all -rotate-90"></i></p> <!----></div></li><li><div class="sidebar-group mb-2 collapsable"><p class="cursor-pointer font-bold text-gray-darker flex items-center justify-center text-md pl-5 pr-2 py-1"><span class="flex-1">Migration</span> <i class="bx bx-chevron-down text-xl transition-all -rotate-90"></i></p> <!----></div></li><li><div class="sidebar-group mb-2 collapsable"><p class="cursor-pointer font-bold text-gray-darker flex items-center justify-center text-md pl-5 pr-2 py-1"><span class="flex-1">Documentation</span> <i class="bx bx-chevron-down text-xl transition-all -rotate-90"></i></p> <!----></div></li><li><div class="sidebar-group mb-2 collapsable"><p class="cursor-pointer font-bold text-gray-darker flex items-center justify-center text-md pl-5 pr-2 py-1"><span class="flex-1">Advanced</span> <i class="bx bx-chevron-down text-xl transition-all -rotate-90"></i></p> <!----></div></li><li><div class="sidebar-group mb-2 collapsable"><p class="cursor-pointer font-bold text-gray-darker flex items-center justify-center text-md pl-5 pr-2 py-1 open"><span class="flex-1">Plugins</span> <i class="bx bx-chevron-down text-xl transition-all"></i></p> <ul><li><a href="/tutorials/passport.html" aria-current="page" class="active sidebar-link relative block py-2 pl-7">Passport.js</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/tutorials/passport.html#installation" class="sidebar-link relative block py-2 ">Installation</a></li><li class="sidebar-sub-header"><a href="/tutorials/passport.html#configure-your-server" class="sidebar-link relative block py-2 ">Configure your server</a></li><li class="sidebar-sub-header"><a href="/tutorials/passport.html#create-a-new-protocol" class="sidebar-link relative block py-2 ">Create a new Protocol</a></li><li class="sidebar-sub-header"><a href="/tutorials/passport.html#create-the-passport-controller" class="sidebar-link relative block py-2 ">Create the Passport controller</a></li><li class="sidebar-sub-header"><a href="/tutorials/passport.html#protect-a-route" class="sidebar-link relative block py-2 ">Protect a route</a></li><li class="sidebar-sub-header"><a href="/tutorials/passport.html#basic-auth" class="sidebar-link relative block py-2 ">Basic Auth</a></li><li class="sidebar-sub-header"><a href="/tutorials/passport.html#advanced-auth" class="sidebar-link relative block py-2 ">Advanced Auth</a></li><li class="sidebar-sub-header"><a href="/tutorials/passport.html#roles" class="sidebar-link relative block py-2 ">Roles</a></li><li class="sidebar-sub-header"><a href="/tutorials/passport.html#decorators" class="sidebar-link relative block py-2 ">Decorators</a></li><li class="sidebar-sub-header"><a href="/tutorials/passport.html#author" class="sidebar-link relative block py-2 ">Author</a></li><li class="sidebar-sub-header"><a href="/tutorials/passport.html#maintainers" class="sidebar-link relative block py-2 ">Maintainers</a></li></ul></li><li><a href="/tutorials/typeorm.html" class="sidebar-link relative block py-2 pl-7">TypeORM</a></li><li><a href="/tutorials/mongoose.html" class="sidebar-link relative block py-2 pl-7">Mongoose</a></li><li><a href="/tutorials/graphql.html" class="sidebar-link relative block py-2 pl-7">GraphQL</a></li><li><a href="/tutorials/socket-io.html" class="sidebar-link relative block py-2 pl-7">Socket.io</a></li><li><a href="/tutorials/seq.html" class="sidebar-link relative block py-2 pl-7">Seq logger</a></li><li><a href="/tutorials/swagger.html" class="sidebar-link relative block py-2 pl-7">Swagger</a></li><li><a href="/tutorials/ajv.html" class="sidebar-link relative block py-2 pl-7">AJV</a></li><li><a href="/tutorials/aws.html" class="sidebar-link relative block py-2 pl-7">AWS</a></li></ul></div></li><li><div class="sidebar-group mb-2 collapsable"><p class="cursor-pointer font-bold text-gray-darker flex items-center justify-center text-md pl-5 pr-2 py-1"><span class="flex-1">Extras</span> <i class="bx bx-chevron-down text-xl transition-all -rotate-90"></i></p> <!----></div></li></ul> </aside> <footer><div class="px-5 md:px-10 max-w-site m-auto"><div class="page-content py-5"><div class="flex items-center"><div class="flex-1"><h4 class="text-xl mb-4 mt-2 px-2 font-semibold">Support us</h4> <div class="content__default"><p>
            Ts.ED is an MIT-licensed open source project. It can grow thanks to the support by the
            community. If
            you'd like to join them, please read more <a href="/support.html">here</a>.
          </p> <div class="flex items-center justify-center pt-5 mt-5 mb-5"><div class="inline-flex flex-col items-stretch overflow-hidden text-base transition-colors
  bg-white-button border-blue text-blue focus:bg-white-button-active focus:border-blue-active
  hover:bg-white-button-active hover:border-blue-active focus:text-blue-active hover:text-blue-active
   cursor-pointer border-1 border-solid rounded-medium shadow-none"><a href="https://tsed.io/support.html" title="" target="_blank" rel="noopener noreferrer" class="link external reset-link flex justify-center items-center w-full font-bold px-4 py-1"><span class="m-1 text-center flex justify-center items-center">
              Become sponsor
            </span> <!----></a></div></div></div></div></div></div></div>  <div class="px-5 md:px-10  m-auto bg-code-active relative"><div class="pt-5 pb-8 text-center text-white"><div class="flex items-center"><div class="flex-1 flex items-center justify-center"><a title="Github" href="https://github.com/TypedProject/tsed" target="_blank" rel="noopener noreferrer" class="p-1 hover:text-blue-active transition-all duration-500 ease-in-out flex align-center justify-center text-xl py-4 mx-2"><i class="bx bxl-github"></i></a><a title="Gitter" href="https://gitter.im/Tsed-io/community" target="_blank" rel="noopener noreferrer" class="p-1 hover:text-blue-active transition-all duration-500 ease-in-out flex align-center justify-center text-xl py-4 mx-2"><i class="bx bx-message-rounded-dots"></i></a><a title="Twitter" href="https://twitter.com/TsED_io" target="_blank" rel="noopener noreferrer" class="p-1 hover:text-blue-active transition-all duration-500 ease-in-out flex align-center justify-center text-xl py-4 mx-2"><i class="bx bxl-twitter"></i></a><a title="StackOverflow" href="https://stackoverflow.com/search?q=tsed" target="_blank" rel="noopener noreferrer" class="p-1 hover:text-blue-active transition-all duration-500 ease-in-out flex align-center justify-center text-xl py-4 mx-2"><i class="bx bxl-stack-overflow"></i></a></div> <div class="absolute top-0 right-0 pt-5 pr-8 sm:p-10"><div class="relative inline-flex w-auto"><!----> <span class="text-xs py-1 px-2 absolute right-0 rounded-medium rounded-bl-small bg-white text-blue" style="top:-12px;right:-28px;">0</span></div></div></div> <div class="text-sm">
        Copyright  2016-2020 <a href="/license.html" class="text-blue font-bold hover:text-blue-active">MIT License</a> <span class="inline-block text-gray-light px-1">|</span> By
        Lenzotti Romain
      </div></div></div> </footer></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.bb7156b9.js" defer></script><script src="/assets/js/4.3e4f2bec.js" defer></script><script src="/assets/js/777.b4d91985.js" defer></script>
  </body>
</html>
